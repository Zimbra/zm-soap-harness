<t:tests xmlns:t = "urn:zimbraTestHarness">

<t:property name = "test_account1.name" value = "test.${TIME}.${COUNTER}@${defaultdomain.name}"/>
<t:property name = "test_account1.password" value = "test123"/>

<t:property name = "contact1.first" value = "first${TIME}${COUNTER}"/>
<t:property name = "contact1.last" value = "last${TIME}${COUNTER}"/>
<t:property name = "contact1.email" value = "email${TIME}${COUNTER}@hotmail.com"/>
<t:property name = "contact1.newemail" value = "email${TIME}${COUNTER}@gmail.com"/>
<t:property name = "contact10.first" value = "first${TIME}${COUNTER}"/>
<t:property name = "contact10.last" value = "last${TIME}${COUNTER}"/>
<t:property name = "contact11.first" value = "first${TIME}${COUNTER}"/>
<t:property name = "contact11.last" value = "last${TIME}${COUNTER}"/>
<t:property name = "contact10.email" value = "email${TIME}${COUNTER}@hotmail.com"/>
<t:property name = "contact10.newemail" value = "email${TIME}${COUNTER}@gmail.com"/>
<t:property name = "contact2.email" value = "email${TIME}${COUNTER}@hotmail.com"/>
<t:property name = "contact3.email" value = "email${TIME}${COUNTER}@hotmail.com"/>

<t:property name = "contact3.fname" value = "First${TIME}${COUNTER}"/>
<t:property name = "contact3.mname" value = "Middle${TIME}${COUNTER}"/>
<t:property name = "contact3.lname" value = "last${TIME}${COUNTER}"/>
<t:property name = "contact3.company" value = "Company${TIME}${COUNTER}"/>
<t:property name = "contact3.workFax" value = "workFax${TIME}${COUNTER}"/>
<t:property name = "contact3.workStreet" value = "workStreet${TIME}${COUNTER}"/>
<t:property name = "contact3.workCity" value = "City${TIME}${COUNTER}"/>
<t:property name = "contact3.workState" value = "State${TIME}${COUNTER}"/>
<t:property name = "contact3.workPostalCode" value = "Postal${TIME}${COUNTER}"/>
<t:property name = "contact3.Country" value = "Country${TIME}${COUNTER}"/>
<t:property name = "contact3.workURL1" value = "Url1${TIME}${COUNTER}"/>
<t:property name = "contact3.callBackPhone" value = "CBPhone${TIME}${COUNTER}"/>
<t:property name = "contact3.workPhone" value = "workPhone${TIME}${COUNTER}"/>
<t:property name = "contact3.workPhone2" value = "workPhone2${TIME}${COUNTER}"/>
<t:property name = "contact3.carPhone" value = "carPhone${TIME}${COUNTER}"/>
<t:property name = "contact3.homePhone" value = "homePhone${TIME}${COUNTER}"/>
<t:property name = "contact3.homePhone2" value = "homePhone2${TIME}${COUNTER}"/>
<t:property name = "contact3.homeFax" value = "homeFax${TIME}${COUNTER}"/>
<t:property name = "contact3.otherPhone" value = "otherPhone${TIME}${COUNTER}"/>
<t:property name = "contact3.otherFax" value = "otherFax${TIME}${COUNTER}"/>
<t:property name = "contact3.email" value = "email${TIME}${COUNTER}@hotmail.com"/>
<t:property name = "contact3.email1" value = "email1${TIME}${COUNTER}@yahoo.com"/>
<t:property name = "contact3.email2" value = "email2${TIME}${COUNTER}@example.com"/>
<t:property name = "contact3.email3" value = "email3${TIME}${COUNTER}@persistent.co.in"/>
<t:property name = "contact3.jobTitle" value = "Title${TIME}${COUNTER}"/>
<t:property name = "contact3.mobilePhone" value = "Mobile${TIME}${COUNTER}"/>
<t:property name = "contact3.pager" value = "Pager${TIME}${COUNTER}"/>
<t:property name = "contact3.notes1" value = "Notes${TIME}${COUNTER}"/>


<t:property name = "NewContact3.fname" value = "NewFirst${TIME}${COUNTER}"/>
<t:property name = "NewContact3.mname" value = "NewMiddle${TIME}${COUNTER}"/>
<t:property name = "NewContact3.lname" value = "Newlast${TIME}${COUNTER}"/>
<t:property name = "NewContact3.company" value = "NewCompany${TIME}${COUNTER}"/>
<t:property name = "NewContact3.workFax" value = "NewworkFax${TIME}${COUNTER}"/>
<t:property name = "NewContact3.workStreet" value = "NewworkStreet${TIME}${COUNTER}"/>
<t:property name = "NewContact3.workCity" value = "NewCity${TIME}${COUNTER}"/>
<t:property name = "NewContact3.workState" value = "NewState${TIME}${COUNTER}"/>
<t:property name = "NewContact3.workPostalCode" value = "NewPostal${TIME}${COUNTER}"/>
<t:property name = "NewContact3.Country" value = "NewCountry${TIME}${COUNTER}"/>
<t:property name = "NewContact3.workURL1" value = "NewUrl1${TIME}${COUNTER}"/>
<t:property name = "NewContact3.callBackPhone" value = "NewCBPhone${TIME}${COUNTER}"/>
<t:property name = "NewContact3.workPhone" value = "NewworkPhone${TIME}${COUNTER}"/>
<t:property name = "NewContact3.workPhone2" value = "NewworkPhone2${TIME}${COUNTER}"/>
<t:property name = "NewContact3.carPhone" value = "NewcarPhone${TIME}${COUNTER}"/>
<t:property name = "NewContact3.homePhone" value = "NewhomePhone${TIME}${COUNTER}"/>
<t:property name = "NewContact3.homePhone2" value = "NewhomePhone2${TIME}${COUNTER}"/>
<t:property name = "NewContact3.homeFax" value = "NewhomeFax${TIME}${COUNTER}"/>
<t:property name = "NewContact3.otherPhone" value = "NewotherPhone${TIME}${COUNTER}"/>
<t:property name = "NewContact3.otherFax" value = "NewotherFax${TIME}${COUNTER}"/>
<t:property name = "NewContact3.email" value = "Newemail${TIME}${COUNTER}@hotmail.com"/>
<t:property name = "NewContact3.email1" value = "Newemail1${TIME}${COUNTER}@yahoo.com"/>
<t:property name = "NewContact3.email2" value = "Newemail2${TIME}${COUNTER}@example.com"/>
<t:property name = "NewContact3.email3" value = "Newemail3${TIME}${COUNTER}@persistent.co.in"/>
<t:property name = "NewContact3.jobTitle" value = "NewTitle${TIME}${COUNTER}"/>
<t:property name = "NewContact3.mobilePhone" value = "NewMobile${TIME}${COUNTER}"/>
<t:property name = "NewContact3.pager" value = "NewPager${TIME}${COUNTER}"/>
<t:property name = "NewContact3.notes1" value = "NewNotes${TIME}${COUNTER}"/>



<t:property name = "contact4.fname" value = "First${TIME}${COUNTER}"/>
<t:property name = "contact4.mname" value = "Middle${TIME}${COUNTER}"/>
<t:property name = "contact4.lname" value = "last${TIME}${COUNTER}"/>
<t:property name = "contact4.company" value = "Company${TIME}${COUNTER}"/>
<t:property name = "contact4.workFax" value = "workFax${TIME}${COUNTER}"/>
<t:property name = "contact4.workStreet" value = "workStreet${TIME}${COUNTER}"/>
<t:property name = "contact4.workCity" value = "City${TIME}${COUNTER}"/>
<t:property name = "contact4.workState" value = "State${TIME}${COUNTER}"/>
<t:property name = "contact4.workPostalCode" value = "Postal${TIME}${COUNTER}"/>
<t:property name = "contact4.Country" value = "Country${TIME}${COUNTER}"/>
<t:property name = "contact4.workURL1" value = "Url1${TIME}${COUNTER}"/>
<t:property name = "contact4.callBackPhone" value = "CBPhone${TIME}${COUNTER}"/>
<t:property name = "contact4.workPhone" value = "workPhone${TIME}${COUNTER}"/>
<t:property name = "contact4.workPhone2" value = "workPhone2${TIME}${COUNTER}"/>
<t:property name = "contact4.carPhone" value = "carPhone${TIME}${COUNTER}"/>
<t:property name = "contact4.homePhone" value = "homePhone${TIME}${COUNTER}"/>
<t:property name = "contact4.homePhone2" value = "homePhone2${TIME}${COUNTER}"/>
<t:property name = "contact4.homeFax" value = "homeFax${TIME}${COUNTER}"/>
<t:property name = "contact4.otherPhone" value = "otherPhone${TIME}${COUNTER}"/>
<t:property name = "contact4.otherFax" value = "otherFax${TIME}${COUNTER}"/>
<t:property name = "contact4.email" value = "email${TIME}${COUNTER}@hotmail.com"/>
<t:property name = "contact4.email1" value = "email1${TIME}${COUNTER}@yahoo.com"/>
<t:property name = "contact4.email2" value = "email2${TIME}${COUNTER}@example.com"/>
<t:property name = "contact4.email3" value = "email3${TIME}${COUNTER}@persistent.co.in"/>
<t:property name = "contact4.jobTitle" value = "Title${TIME}${COUNTER}"/>
<t:property name = "contact4.mobilePhone" value = "Mobile${TIME}${COUNTER}"/>
<t:property name = "contact4.pager" value = "Pager${TIME}${COUNTER}"/>
<t:property name = "contact4.notes1" value = "Notes${TIME}${COUNTER}"/>


<t:property name = "NewContact4.fname" value = "NewFirst${TIME}${COUNTER}"/>
<t:property name = "NewContact4.mname" value = "NewMiddle${TIME}${COUNTER}"/>
<t:property name = "NewContact4.lname" value = "Newlast${TIME}${COUNTER}"/>
<t:property name = "NewContact4.company" value = "NewCompany${TIME}${COUNTER}"/>
<t:property name = "NewContact4.workFax" value = "NewworkFax${TIME}${COUNTER}"/>
<t:property name = "NewContact4.workStreet" value = "NewworkStreet${TIME}${COUNTER}"/>
<t:property name = "NewContact4.workCity" value = "NewCity${TIME}${COUNTER}"/>
<t:property name = "NewContact4.workState" value = "NewState${TIME}${COUNTER}"/>
<t:property name = "NewContact4.workPostalCode" value = "NewPostal${TIME}${COUNTER}"/>
<t:property name = "NewContact4.Country" value = "NewCountry${TIME}${COUNTER}"/>
<t:property name = "NewContact4.workURL1" value = "NewUrl1${TIME}${COUNTER}"/>
<t:property name = "NewContact4.callBackPhone" value = "NewCBPhone${TIME}${COUNTER}"/>
<t:property name = "NewContact4.workPhone" value = "NewworkPhone${TIME}${COUNTER}"/>
<t:property name = "NewContact4.workPhone2" value = "NewworkPhone2${TIME}${COUNTER}"/>
<t:property name = "NewContact4.carPhone" value = "NewcarPhone${TIME}${COUNTER}"/>
<t:property name = "NewContact4.homePhone" value = "NewhomePhone${TIME}${COUNTER}"/>
<t:property name = "NewContact4.homePhone2" value = "NewhomePhone2${TIME}${COUNTER}"/>
<t:property name = "NewContact4.homeFax" value = "NewhomeFax${TIME}${COUNTER}"/>
<t:property name = "NewContact4.otherPhone" value = "NewotherPhone${TIME}${COUNTER}"/>
<t:property name = "NewContact4.otherFax" value = "NewotherFax${TIME}${COUNTER}"/>
<t:property name = "NewContact4.email" value = "Newemail${TIME}${COUNTER}@hotmail.com"/>
<t:property name = "NewContact4.email1" value = "Newemail1${TIME}${COUNTER}@yahoo.com"/>
<t:property name = "NewContact4.email2" value = "Newemail2${TIME}${COUNTER}@example.com"/>
<t:property name = "NewContact4.email3" value = "Newemail3${TIME}${COUNTER}@persistent.co.in"/>
<t:property name = "NewContact4.jobTitle" value = "NewTitle${TIME}${COUNTER}"/>
<t:property name = "NewContact4.mobilePhone" value = "NewMobile${TIME}${COUNTER}"/>
<t:property name = "NewContact4.pager" value = "NewPager${TIME}${COUNTER}"/>
<t:property name = "NewContact4.notes1" value = "NewNotes${TIME}${COUNTER}"/>

<t:property name = "contacts.alpha" value = "abcd"/>
<t:property name = "contacts.negative" value = "-1"/>
<t:property name = "contacts.decimal" value = "1.5"/>
<t:property name = "contacts.zero" value = "0"/>
<t:property name = "contacts.blank" value = ""/>
<t:property name="test_acct.server" value="NOT_DEFINED"/>

<t:property name="server.zimbraAdmin" value="${zimbraServer.name}"/>

<t:test_case testcaseid = "Ping" type="always">
    <t:objective>Basic system check</t:objective>
    
    <t:test required = "true">
        <t:request>
            <PingRequest xmlns = "urn:zimbraAdmin"/>
        </t:request>
        <t:response>
            <t:select path = "//admin:PingResponse"/>
        </t:response>
    </t:test>
    
</t:test_case>


<t:test_case testcaseid = "ContactsModify_acctsetup1" type="always">
    <t:objective>create test account</t:objective>
    
    <t:test required = "true">
        <t:request>
            <AuthRequest xmlns = "urn:zimbraAdmin">
                <name>${admin.user}</name>
                <password>${admin.password}</password>
            </AuthRequest>
        </t:request>
        <t:response>
            <t:select path = "//admin:AuthResponse/admin:authToken" set = "authToken"/>
        </t:response>
    </t:test>
    
    <t:test required = "true">
        <t:request>
            <CreateAccountRequest xmlns = "urn:zimbraAdmin">
                <name>${test_account1.name}</name>
                <password>${test_account1.password}</password>
            </CreateAccountRequest>
        </t:request>
        <t:response>
            <t:select path = "//admin:CreateAccountResponse/admin:account" attr = "id" set = "test_account1.id"/>
            <t:select path='//admin:CreateAccountResponse/admin:account/admin:a[@n="zimbraMailHost"]' set="test_acct.server"/>
        </t:response>
    </t:test>
    
</t:test_case>

<t:property name="server.zimbraAccount" value="${test_acct.server}"/>

<t:test_case testcaseid = "ContactsModify_acctlogin" type="always">
    <t:objective>login as the test account</t:objective>
    
    <t:test required = "true">
        <t:request>
            <AuthRequest xmlns = "urn:zimbraAccount">
                <account by = "name">${test_account1.name}</account>
                <password>${test_account1.password}</password>
                <!--<prefs/>-->
            </AuthRequest>
        </t:request>
        <t:response>
            <t:select path = "//acct:AuthResponse/acct:lifetime" match = "^\d+$"/>
            <t:select path = "//acct:AuthResponse/acct:authToken" set = "authToken"/>

        </t:response>
    </t:test>
    
</t:test_case>


<t:test_case testcaseid = "ModifyContactRequest1" bugids="2532" type="bhr">
    <t:objective>Modify a contact: change the email address</t:objective>
    <t:steps>1. create a new contact with email address A
        2. change the contact to email address B
    </t:steps>
    
    <t:test id = "modifycontactrequest1a">
        <t:request>
            <CreateContactRequest xmlns = "urn:zimbraMail">
                <cn>
                    <a n = "firstName">${contact1.first}</a>
                    <a n = "lastName">${contact1.last}</a>
                    <a n = "email">${contact1.email}</a>
                </cn>
            </CreateContactRequest>
        </t:request>
        <t:response>
            <t:select path = "//mail:CreateContactResponse/mail:cn">
            <t:select attr = "id" set = "contact.id"/>            
            </t:select>
        </t:response>
    </t:test>
    
    <t:test id = "modifycontactrequest1b" depends = "modifycontactrequest1a">
        <t:request>
            <ModifyContactRequest xmlns = "urn:zimbraMail" replace = "0" force = "1">
                <cn id = "${contact.id}">
                    <a n = "email">${contact1.newemail}</a>
                </cn>
            </ModifyContactRequest>
        </t:request>
        <t:response>
            <t:select path = "//mail:ModifyContactResponse/mail:cn"/>
        </t:response>
    </t:test>
    
    <t:test depends = "modifycontactrequest1b">
        <t:request>
            <GetContactsRequest xmlns = "urn:zimbraMail">
                <cn id = "${contact.id}"/>
            </GetContactsRequest>
        </t:request>
        <t:response>
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='email']"  match = "${contact1.newemail}"/>
        </t:response>
    </t:test>
    
</t:test_case>


<t:test_case testcaseid = "ModifyContactRequest2" bugids="2532" type="bhr">
    <t:objective>Modify a contact: change the each of the fields </t:objective>
    <t:steps>1. Create a new contact.
             2. Modify the content
             3. Verify for the modification
    </t:steps>
    
    <t:test id = "modifycontactrequest2a">
        <t:request>
            <CreateContactRequest xmlns = "urn:zimbraMail">
                <cn>
                    <a n = "firstName">${contact3.fname}</a>
                    <a n = "lastName">${contact3.lname}</a>
                    <a n = "email">${contact3.email}</a>
                    <a n = "company">${contact3.company}</a>
                    <a n = "workFax">${contact3.workFax}</a>
                    <a n = "workPhone2">${contact3.workPhone2}</a>
                    <a n = "callbackPhone">${contact3.callBackPhone}</a>
                    <a n = "carPhone">${contact3.carPhone}</a>
                    <a n = "homePhone2">${contact3.homePhone2}</a>
                    <a n = "homeFax">${contact3.homeFax}</a>
                    <a n = "otherPhone">${contact3.otherPhone}</a>
                    <a n = "otherFax">${contact3.otherFax}</a>
                    <a n = "email1">${contact3.email1}</a>
                    <a n = "email2">${contact3.email2}</a>
                    <a n = "email3">${contact3.email3}</a>
                    <a n = "middleName">${contact3.mname}</a>
                    <a n = "jobTitle">${contact3.jobTitle}</a>
                    <a n = "workPhone">${contact3.workPhone}</a>
                    <a n = "homePhone">${contact3.homePhone}</a>
                    <a n = "mobilePhone">${contact3.mobilePhone}</a>
                    <a n = "pager">${contact3.pager}</a>
                    <a n = "workStreet">${contact3.workStreet}</a>
                    <a n = "workCity">${contact3.workCity}</a>
                    <a n = "workState">${contact3.workState}</a>
                    <a n = "workPostalCode">${contact3.workPostalCode}</a>
                    <a n = "workCountry">${contact3.Country}</a>
                    <a n = "workURL">${contact3.workURL1}</a>
                    <a n = "notes">${contact3.notes1}</a>
                </cn>
            </CreateContactRequest>
        </t:request>
        <t:response>
            <t:select path = "//mail:CreateContactResponse/mail:cn">
            <t:select attr = "id" set = "contact3.id"/>                
            </t:select>
        </t:response>
    </t:test>
    
    <t:test id = "modifycontactrequest2b" depends = "modifycontactrequest2a">
        <t:request>
            <ModifyContactRequest xmlns = "urn:zimbraMail" replace="0" force="0">
                <cn id = "${contact3.id}">
                    <a n = "firstName">${NewContact3.fname}</a>
                    <a n = "lastName">${NewContact3.lname}</a>
                    <a n = "email">${NewContact3.email}</a>
                    <a n = "company">${NewContact3.company}</a>
                    <a n = "workFax">${NewContact3.workFax}</a>
                    <a n = "workPhone2">${NewContact3.workPhone2}</a>
                    <a n = "callbackPhone">${NewContact3.callBackPhone}</a>
                    <a n = "carPhone">${NewContact3.carPhone}</a>
                    <a n = "homePhone2">${NewContact3.homePhone2}</a>
                    <a n = "homeFax">${NewContact3.homeFax}</a>
                    <a n = "otherPhone">${NewContact3.otherPhone}</a>
                    <a n = "otherFax">${NewContact3.otherFax}</a>
                    <a n = "email1">${NewContact3.email1}</a>
                    <a n = "email2">${NewContact3.email2}</a>
                    <a n = "email3">${NewContact3.email3}</a>
                    <a n = "middleName">${NewContact3.mname}</a>
                    <a n = "jobTitle">${NewContact3.jobTitle}</a>
                    <a n = "workPhone">${NewContact3.workPhone}</a>
                    <a n = "homePhone">${NewContact3.homePhone}</a>
                    <a n = "mobilePhone">${NewContact3.mobilePhone}</a>
                    <a n = "pager">${NewContact3.pager}</a>
                    <a n = "workStreet">${NewContact3.workStreet}</a>
                    <a n = "workCity">${NewContact3.workCity}</a>
                    <a n = "workState">${NewContact3.workState}</a>
                    <a n = "workPostalCode">${NewContact3.workPostalCode}</a>
                    <a n = "workCountry">${NewContact3.Country}</a>
                    <a n = "workURL">${NewContact3.workURL1}</a>
                    <a n = "notes">${NewContact3.notes1}</a>
                </cn>
            </ModifyContactRequest>
        </t:request>
        <t:response>
            <t:select path = "//mail:ModifyContactResponse/mail:cn"/>
        </t:response>
    </t:test>
    
    <t:test depends = "modifycontactrequest2b">
        <t:request>
            <GetContactsRequest xmlns = "urn:zimbraMail">
                <cn id="${contact3.id}" />
            </GetContactsRequest>
        </t:request>
        <t:response>    
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='email']" match = "${NewContact3.email}"/>
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='firstName']" match = "${NewContact3.fname}"/>
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='lastName']" match="${NewContact3.lname}"/>            
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='company']" match="${NewContact3.company}"/>
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='workFax']" match="${NewContact3.workFax}"/>
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='workPhone2']" match="${NewContact3.workPhone2}"/>
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='callbackPhone']" match="${NewContact3.callBackPhone}"/>
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='carPhone']" match="${NewContact3.carPhone}"/>
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='homePhone2']" match="${NewContact3.homePhone2}"/>
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='homeFax']" match="${NewContact3.homeFax}"/>
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='otherPhone']" match="${NewContact3.otherPhone}"/>
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='otherFax']" match="${NewContact3.otherFax}"/>
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='email1']" match="${NewContact3.email1}"/>
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='email2']" match="${NewContact3.email2}"/>
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='email3']" match="${NewContact3.email3}"/>
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='middleName']" match="${NewContact3.mname}"/>
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='jobTitle']" match="${NewContact3.jobTitle}"/>
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='workPhone']" match="${NewContact3.workPhone}"/>
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='homePhone']" match="${NewContact3.homePhone}"/>
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='mobilePhone']" match="${NewContact3.mobilePhone}"/>
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='pager']" match="${NewContact3.pager}"/>
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='workStreet']" match="${NewContact3.workStreet}"/>
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='workCity']" match="${NewContact3.workCity}"/>
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='workState']" match="${NewContact3.workState}"/>
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='workPostalCode']" match="${NewContact3.workPostalCode}"/>
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='workCountry']" match="${NewContact3.Country}"/>
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='workURL']" match="${NewContact3.workURL1}"/>
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='notes']" match="${NewContact3.notes1}"/>
        </t:response>
    </t:test>
</t:test_case>


<t:test_case testcaseid = "ModifyContactRequest3" bugids="2532" type="functional">
    <t:objective>Modify a contact: Verify proper functioning of attribute replace =0/1</t:objective>
    <t:steps>1. Create a new contact.
             2. Modify the content with replace = 0
             3. Verify the modification
             4. Modify again with replace =1 .
             5. Verify the content.
    </t:steps>
    
    <t:test id = "modifycontactrequest3a">
        <t:request>
            <CreateContactRequest xmlns = "urn:zimbraMail">
                <cn>
                    <a n = "firstName">${contact4.fname}</a>
                    <a n = "lastName">${contact4.lname}</a>
                    <a n = "email">${contact4.email}</a>
                    <a n = "company">${contact4.company}</a>
                    <a n = "workFax">${contact4.workFax}</a>
                    <a n = "workPhone2">${contact4.workPhone2}</a>
                    <a n = "callbackPhone">${contact4.callBackPhone}</a>
                    <a n = "carPhone">${contact4.carPhone}</a>
                    <a n = "homePhone2">${contact4.homePhone2}</a>
                    <a n = "homeFax">${contact4.homeFax}</a>
                    <a n = "otherPhone">${contact4.otherPhone}</a>
                    <a n = "otherFax">${contact4.otherFax}</a>
                    <a n = "email1">${contact4.email1}</a>
                    <a n = "email2">${contact4.email2}</a>
                    <a n = "email3">${contact4.email3}</a>
                    <a n = "middleName">${contact4.mname}</a>
                    <a n = "jobTitle">${contact4.jobTitle}</a>
                    <a n = "workPhone">${contact4.workPhone}</a>
                    <a n = "homePhone">${contact4.homePhone}</a>
                    <a n = "mobilePhone">${contact4.mobilePhone}</a>
                    <a n = "pager">${contact4.pager}</a>
                    <a n = "workStreet">${contact4.workStreet}</a>
                    <a n = "workCity">${contact4.workCity}</a>
                    <a n = "workState">${contact4.workState}</a>
                    <a n = "workPostalCode">${contact4.workPostalCode}</a>
                    <a n = "workCountry">${contact4.Country}</a>
                    <a n = "workURL">${contact4.workURL1}</a>
                    <a n = "notes">${contact4.notes1}</a>
                </cn>
            </CreateContactRequest>
        </t:request>
        <t:response>
            <t:select path = "//mail:CreateContactResponse/mail:cn">
                <t:select attr = "id" set = "contact4.id"/>                
            </t:select>
        </t:response>
    </t:test>
    
    <t:test id = "modifycontactrequest3b" depends = "modifycontactrequest3a">
        <t:request>
            <ModifyContactRequest xmlns = "urn:zimbraMail" replace="0">
                <cn id = "${contact4.id}">
                    <a n = "firstName">${NewContact4.fname}</a>
                    <a n = "lastName">${NewContact4.lname}</a>                    
                    <a n = "middleName">${NewContact4.mname}</a>                    
                </cn>
            </ModifyContactRequest>
        </t:request>
        <t:response>
            <t:select path = "//mail:ModifyContactResponse/mail:cn"/>
        </t:response>
    </t:test>
    
    <t:test depends = "modifycontactrequest3b">
        <t:request>
            <GetContactsRequest xmlns = "urn:zimbraMail">
                <cn id="${contact4.id}" />
            </GetContactsRequest>
        </t:request>
        <t:response>    
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='firstName']" match = "${NewContact4.fname}"/>
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='lastName']" match="${NewContact4.lname}"/>            
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='middleName']" match="${NewContact4.mname}"/>
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='email']" match = "${contact4.email}"/>
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='company']" match="${contact4.company}"/>
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='workFax']" match="${contact4.workFax}"/>
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='workPhone2']" match="${contact4.workPhone2}"/>
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='callbackPhone']" match="${contact4.callBackPhone}"/>
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='carPhone']" match="${contact4.carPhone}"/>
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='homePhone2']" match="${contact4.homePhone2}"/>
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='homeFax']" match="${contact4.homeFax}"/>
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='otherPhone']" match="${contact4.otherPhone}"/>
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='otherFax']" match="${contact4.otherFax}"/>
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='email1']" match="${contact4.email1}"/>
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='email2']" match="${contact4.email2}"/>
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='email3']" match="${contact4.email3}"/>            
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='jobTitle']" match="${contact4.jobTitle}"/>
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='workPhone']" match="${contact4.workPhone}"/>
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='homePhone']" match="${contact4.homePhone}"/>
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='mobilePhone']" match="${contact4.mobilePhone}"/>
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='pager']" match="${contact4.pager}"/>
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='workStreet']" match="${contact4.workStreet}"/>
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='workCity']" match="${contact4.workCity}"/>
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='workState']" match="${contact4.workState}"/>
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='workPostalCode']" match="${contact4.workPostalCode}"/>
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='workCountry']" match="${contact4.Country}"/>
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='workURL']" match="${contact4.workURL1}"/>
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='notes']" match="${contact4.notes1}"/>
        </t:response>
    </t:test>
    
    <t:test id = "modifycontactrequest3c" depends = "modifycontactrequest3a">
        <t:request>
            <ModifyContactRequest xmlns = "urn:zimbraMail" replace="1">
                <cn id = "${contact4.id}" >
                    <a n = "firstName">${NewContact4.fname}</a>
                    <a n = "lastName">${NewContact4.lname}</a>                    
                    <a n = "middleName">${NewContact4.mname}</a>                    
                </cn>
            </ModifyContactRequest>
        </t:request>
        <t:response>
            <t:select path = "//mail:ModifyContactResponse/mail:cn"/>
        </t:response>
    </t:test>
    
    <t:test depends = "modifycontactrequest3c">
        <t:request>
            <GetContactsRequest xmlns = "urn:zimbraMail">
                <cn id="${contact4.id}" />
            </GetContactsRequest>
        </t:request>
        <t:response>    
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='firstName']" match = "${NewContact4.fname}"/>
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='lastName']" match="${NewContact4.lname}"/>            
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='middleName']" match="${NewContact4.mname}"/>
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='email']" emptyset="1"/>
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='company']" emptyset="1"/>
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='workFax']" emptyset="1" />
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='workPhone2']" emptyset="1" />
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='callbackPhone']" emptyset="1" />
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='carPhone']" emptyset="1" />
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='homePhone2']" emptyset="1" />
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='homeFax']" emptyset="1" />
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='otherPhone']" emptyset="1" />
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='otherFax']" emptyset="1" />
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='email1']" emptyset="1" />
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='email2']" emptyset="1" />
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='email3']" emptyset="1" />            
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='jobTitle']" emptyset="1" />
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='workPhone']" emptyset="1" />
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='homePhone']" emptyset="1" />
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='mobilePhone']" emptyset="1" />
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='pager']" emptyset="1" />
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='workStreet']" emptyset="1" />
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='workCity']" emptyset="1" />
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='workState']" emptyset="1" />
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='workPostalCode']" emptyset="1" />
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='workCountry']" emptyset="1" />
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='workURL']" emptyset="1" />
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='notes']" emptyset="1" />            
        </t:response>
    </t:test>   
    
</t:test_case>


<t:test_case testcaseid = "ModifyContactRequest4" bugids="2532" type="deprecated">
    <t:objective>Modify a contact: verify functioning of force attribute = 0/1 </t:objective>
    <t:steps>1. Create a new contact with email address A
             2. Modify the contact with force = 0
             3. Modify the contact with force = 1
    </t:steps>
    
    <t:test id = "modifycontactrequest4a">
        <t:request>
            <CreateContactRequest xmlns = "urn:zimbraMail">
                <cn>
                    <a n = "firstName">First${TIME}${COUNTER}</a>
                    <a n = "lastName">Last${TIME}${COUNTER}</a>
                    <a n = "email">mail${TIME}${COUNTER}@example.com</a>
                </cn>
            </CreateContactRequest>
        </t:request>
        <t:response>
            <t:select path = "//mail:CreateContactResponse/mail:cn">
            <t:select attr = "id" set="contact5a.id"/>
            </t:select>
        </t:response>
    </t:test>
    
    <t:test id = "modifycontactrequest4b" depends = "modifycontactrequest4a">
        <t:request>
            <ModifyContactRequest xmlns = "urn:zimbraMail" replace = "0" force = "0">
                <cn id = "${contact5a.id}" md = "${TIME}">
                    <a n = "email">NewMail${TIME}${COUNTER}@persistent.co.in</a>
                </cn>
            </ModifyContactRequest>
        </t:request>
        <t:response>
            <t:select path = "//zimbra:Code" match="mail.MODIFY_CONFLICT"/>
        </t:response>
    </t:test>
    
    <t:test id = "modifycontactrequest4c" depends = "modifycontactrequest4a">
        <t:request>
            <ModifyContactRequest xmlns = "urn:zimbraMail" replace = "0" force = "1">
                <cn id = "${contact5a.id}" md = "${TIME}">
                    <a n = "email">NewMail${TIME}${COUNTER}@persistent.co.in</a>
                </cn>
            </ModifyContactRequest>
        </t:request>
        <t:response>
            <t:select path = "//mail:ModifyContactResponse/mail:cn"/>
        </t:response>
    </t:test>
    
</t:test_case>


<t:test_case testcaseid = "ModifyContactRequest5" type="functional">
    <t:objective> Modify a contact and delete all the info of contact </t:objective>

    <t:test id = "modifycontactrequest5a">
        <t:request>
            <CreateContactRequest xmlns = "urn:zimbraMail">
                <cn>
                    <a n = "firstName">First${TIME}${COUNTER}</a>
                    <a n = "lastName">Last${TIME}${COUNTER}</a>
                    <a n = "email">mail${TIME}${COUNTER}@example.com</a>
                </cn>
            </CreateContactRequest>
        </t:request>
        <t:response>
            <t:select path = "//mail:CreateContactResponse/mail:cn">
            <t:select attr = "id" set="contact6.id"/>
            </t:select>
        </t:response>
    </t:test>
    
    <t:test depends = "modifycontactrequest5a">
        <t:request>
            <ModifyContactRequest xmlns = "urn:zimbraMail">
                <cn id = "${contact6.id}" md = "${TIME}">
                    <a n = "firstName"/>
                    <a n = "lastName"/>
                    <a n = "email"/>
                </cn>
            </ModifyContactRequest>
        </t:request>
        <t:response>
            <t:select path = "//zimbra:Code" match="service.INVALID_REQUEST"/>
        </t:response>
    </t:test>
    
</t:test_case>


<t:test_case testcaseid = "ModifyContactRequest6" type="functional">
    <t:objective> Modify a contact and delete all the info of contact with replace="1" force="1" </t:objective>

    <t:test id = "modifycontactrequest6a">
        <t:request>
            <CreateContactRequest xmlns = "urn:zimbraMail">
                <cn>
                    <a n = "firstName">${NewContact4.fname}</a>
                    <a n = "lastName">${NewContact4.lname}</a>
                    <a n = "middleName">${NewContact4.mname}</a>
                </cn>
            </CreateContactRequest>
        </t:request>
        <t:response>
            <t:select path = "//mail:CreateContactResponse/mail:cn">
            <t:select attr = "id" set="contact6.id"/>
            </t:select>
        </t:response>
    </t:test>
    
    <t:test depends = "modifycontactrequest6a">
        <t:request>
            <ModifyContactRequest xmlns = "urn:zimbraMail" replace = "1" force = "1">
                <cn id = "${contact6.id}" md = "${TIME}">
                    <a n = "firstName"/>
                    <a n = "lastName"/>
                    <a n = "middleName"/>
                </cn>
            </ModifyContactRequest>
        </t:request>
        <t:response>
            <t:select path = "//zimbra:Code" match="service.INVALID_REQUEST"/>
        </t:response>
    </t:test>

    <t:test>
        <t:request>
            <GetContactsRequest xmlns = "urn:zimbraMail">
                <cn id="${contact6.id}" />
            </GetContactsRequest>
        </t:request>
        <t:response>    
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='firstName']" match = "${NewContact4.fname}" />
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='lastName']" match = "${NewContact4.lname}" />
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='middleName']" match = "${NewContact4.mname}" />
        </t:response>
    </t:test>   
  
</t:test_case>


<t:test_case testcaseid = "ModifyContactRequest7" type="functional">
    <t:objective> Modify a contact with fileas option as invalid (>7/alpha/negative/decimal/zero/blank)</t:objective>

    <t:test id = "modifycontactrequest7a">
        <t:request>
            <CreateContactRequest xmlns = "urn:zimbraMail">
                <cn>
                    <a n = "firstName">First${TIME}${COUNTER}</a>
                    <a n = "lastName">Last${TIME}${COUNTER}</a>
                    <a n = "email">mail${TIME}${COUNTER}@example.com</a>
                    <a n="fileAs">2</a>
                </cn>
            </CreateContactRequest>
        </t:request>
        <t:response>
            <t:select path = "//mail:CreateContactResponse/mail:cn" attr="id" set="contact7.id"/>
        </t:response>
    </t:test>

    <t:test depends = "modifycontactrequest7a">
        <t:request>
            <ModifyContactRequest xmlns = "urn:zimbraMail">
                <cn id = "${contact7.id}" md = "${TIME}">
                    <a n = "fileAs">10</a>
                </cn>
            </ModifyContactRequest>
        </t:request>
        <t:response>
            <t:select path = "//zimbra:Code" match="service.INVALID_REQUEST"/>
        </t:response>
    </t:test>

    <t:test depends = "modifycontactrequest7a">
        <t:request>
            <ModifyContactRequest xmlns = "urn:zimbraMail">
                <cn id = "${contact7.id}" md = "${TIME}">
                    <a n = "fileAs">${contacts.alpha}</a>
                </cn>
            </ModifyContactRequest>
        </t:request>
        <t:response>
            <t:select path = "//zimbra:Code" match="service.INVALID_REQUEST"/>
        </t:response>
    </t:test>

    <t:test depends = "modifycontactrequest7a">
        <t:request>
            <ModifyContactRequest xmlns = "urn:zimbraMail">
                <cn id = "${contact7.id}" md = "${TIME}">
                    <a n = "fileAs">${contacts.negative}</a>
                </cn>
            </ModifyContactRequest>
        </t:request>
        <t:response>
            <t:select path = "//zimbra:Code" match="service.INVALID_REQUEST"/>
        </t:response>
    </t:test>

    <t:test depends = "modifycontactrequest7a">
        <t:request>
            <ModifyContactRequest xmlns = "urn:zimbraMail">
                <cn id = "${contact7.id}" md = "${TIME}">
                    <a n = "fileAs">${contacts.decimal}</a>
                </cn>
            </ModifyContactRequest>
        </t:request>
        <t:response>
            <t:select path = "//zimbra:Code" match="service.INVALID_REQUEST"/>
        </t:response>
    </t:test>

    <t:test depends = "modifycontactrequest7a">
        <t:request>
            <ModifyContactRequest xmlns = "urn:zimbraMail">
                <cn id = "${contact7.id}" md = "${TIME}">
                    <a n = "fileAs">${contacts.zero}</a>
                </cn>
            </ModifyContactRequest>
        </t:request>
        <t:response>
            <t:select path = "//mail:ModifyContactResponse/mail:cn"/>
        </t:response>
    </t:test>

    <t:test depends = "modifycontactrequest7a">
        <t:request>
            <ModifyContactRequest xmlns = "urn:zimbraMail">
                <cn id = "${contact7.id}" md = "${TIME}">
                    <a n = "fileAs">${contacts.blank}</a>
                </cn>
            </ModifyContactRequest>
        </t:request>
        <t:response>
            <t:select path = "//mail:ModifyContactResponse/mail:cn"/>
        </t:response>
    </t:test>

</t:test_case>


<t:test_case testcaseid = "ModifyContactRequest8" type="bhr">
    <t:objective> Modify a contact to change fileas option to all allowed values i.e from 1 to 7 </t:objective>

    <t:test id = "modifycontactrequest8a">
        <t:request>
            <CreateContactRequest xmlns = "urn:zimbraMail">
                <cn>
                    <a n = "firstName">First${TIME}${COUNTER}</a>
                    <a n = "lastName">Last${TIME}${COUNTER}</a>
                    <a n = "email">mail${TIME}${COUNTER}@example.com</a>
                </cn>
            </CreateContactRequest>
        </t:request>
        <t:response>
            <t:select path = "//mail:CreateContactResponse/mail:cn" attr="id" set="contact8.id"/>
        </t:response>
    </t:test>


    <t:test depends = "modifycontactrequest8a">
        <t:request>
            <ModifyContactRequest xmlns = "urn:zimbraMail">
                <cn id = "${contact8.id}" md = "${TIME}">
                    <a n = "fileAs">1</a>
                </cn>
            </ModifyContactRequest>
        </t:request>
        <t:response>
            <t:select path = "//mail:ModifyContactResponse/mail:cn"/>
        </t:response>
    </t:test>

    <t:test depends = "modifycontactrequest8a">
        <t:request>
            <ModifyContactRequest xmlns = "urn:zimbraMail">
                <cn id = "${contact8.id}" md = "${TIME}">
                    <a n = "fileAs">1</a>
                </cn>
            </ModifyContactRequest>
        </t:request>
        <t:response>
            <t:select path = "//mail:ModifyContactResponse/mail:cn"/>
        </t:response>
    </t:test>

    <t:test depends = "modifycontactrequest8a">
        <t:request>
            <ModifyContactRequest xmlns = "urn:zimbraMail">
                <cn id = "${contact8.id}" md = "${TIME}">
                    <a n = "fileAs">2</a>
                </cn>
            </ModifyContactRequest>
        </t:request>
        <t:response>
            <t:select path = "//mail:ModifyContactResponse/mail:cn"/>
        </t:response>
    </t:test>

    <t:test depends = "modifycontactrequest8a">
        <t:request>
            <ModifyContactRequest xmlns = "urn:zimbraMail">
                <cn id = "${contact8.id}" md = "${TIME}">
                    <a n = "fileAs">3</a>
                </cn>
            </ModifyContactRequest>
        </t:request>
        <t:response>
            <t:select path = "//mail:ModifyContactResponse/mail:cn"/>
        </t:response>
    </t:test>

    <t:test depends = "modifycontactrequest8a">
        <t:request>
            <ModifyContactRequest xmlns = "urn:zimbraMail">
                <cn id = "${contact8.id}" md = "${TIME}">
                    <a n = "fileAs">4</a>
                </cn>
            </ModifyContactRequest>
        </t:request>
        <t:response>
            <t:select path = "//mail:ModifyContactResponse/mail:cn"/>
        </t:response>
    </t:test>

    <t:test depends = "modifycontactrequest8a">
        <t:request>
            <ModifyContactRequest xmlns = "urn:zimbraMail">
                <cn id = "${contact8.id}" md = "${TIME}">
                    <a n = "fileAs">5</a>
                </cn>
            </ModifyContactRequest>
        </t:request>
        <t:response>
            <t:select path = "//mail:ModifyContactResponse/mail:cn"/>
        </t:response>
    </t:test>

    <t:test depends = "modifycontactrequest8a">
        <t:request>
            <ModifyContactRequest xmlns = "urn:zimbraMail">
                <cn id = "${contact8.id}" md = "${TIME}">
                    <a n = "fileAs">6</a>
                </cn>
            </ModifyContactRequest>
        </t:request>
        <t:response>
            <t:select path = "//mail:ModifyContactResponse/mail:cn"/>
        </t:response>
    </t:test>

    <t:test depends = "modifycontactrequest8a">
        <t:request>
            <ModifyContactRequest xmlns = "urn:zimbraMail">
                <cn id = "${contact8.id}" md = "${TIME}">
                    <a n = "fileAs">7</a>
                </cn>
            </ModifyContactRequest>
        </t:request>
        <t:response>
            <t:select path = "//mail:ModifyContactResponse/mail:cn"/>
        </t:response>
    </t:test>

</t:test_case>


<t:test_case testcaseid = "ModifyContactRequest9" type="functional">
    <t:objective> Modify a contact with invalid id (numbers/alpha/negative/blank)</t:objective>

    <t:test>
        <t:request>
            <ModifyContactRequest xmlns = "urn:zimbraMail">
                <cn id = "12345678" md = "${TIME}">
                    <a n = "fileAs">7</a>
                </cn>
            </ModifyContactRequest>
        </t:request>
        <t:response>
            <t:select path = "//zimbra:Code" match="mail.NO_SUCH_CONTACT"/>
        </t:response>
    </t:test>

    <t:test>
        <t:request>
            <ModifyContactRequest xmlns = "urn:zimbraMail">
                <cn id = "${contacts.alpha}" md = "${TIME}">
                    <a n = "fileAs">7</a>
                </cn>
            </ModifyContactRequest>
        </t:request>
        <t:response>
            <t:select path = "//zimbra:Code" match="service.INVALID_REQUEST"/>
        </t:response>
    </t:test>

    <t:test>
        <t:request>
            <ModifyContactRequest xmlns = "urn:zimbraMail">
                <cn id = "${contacts.negative}" md = "${TIME}">
                    <a n = "fileAs">7</a>
                </cn>
            </ModifyContactRequest>
        </t:request>
        <t:response>
            <t:select path = "//zimbra:Code" match="mail.NO_SUCH_CONTACT"/>
        </t:response>
    </t:test>

    <t:test>
        <t:request>
            <ModifyContactRequest xmlns = "urn:zimbraMail">
                <cn id = "${contacts.blank}" md = "${TIME}">
                    <a n = "fileAs">7</a>
                </cn>
            </ModifyContactRequest>
        </t:request>
        <t:response>
            <t:select path = "//zimbra:Code" match="service.INVALID_REQUEST"/>
        </t:response>
    </t:test>

</t:test_case>

<!--  Test case corresponding to 15589 --> 

<t:test_case testcaseid = "ModifyContactRequest10" type="bhr">
    <t:objective>To change the email address of a contact with verbose="0" and verify that only "id" is returned in response</t:objective>
    <t:steps>1. create a new contact with email address A
        2. change the contact to email address B
    </t:steps>
    
    <t:test id = "modifycontactrequest10a">
        <t:request>
            <CreateContactRequest xmlns = "urn:zimbraMail">
                <cn>
                    <a n = "firstName">${contact10.first}</a>
                    <a n = "lastName">${contact10.last}</a>
                    <a n = "email">${contact10.email}</a>
                </cn>
            </CreateContactRequest>
        </t:request>
        <t:response>
            <t:select path = "//mail:CreateContactResponse/mail:cn">
            <t:select attr = "id" set = "contact.id"/>            
            </t:select>
        </t:response>
    </t:test>
    
    <t:test id = "modifycontactrequest10b" depends = "modifycontactrequest1a">
        <t:request>
            <ModifyContactRequest xmlns = "urn:zimbraMail" replace = "0" force = "1" verbose ="0">
                <cn id = "${contact.id}">
                    <a n = "email">${contact10.newemail}</a>
                </cn>
            </ModifyContactRequest>
        </t:request>
        <t:response>
            <t:select path = "//mail:ModifyContactResponse/mail:cn" attr="id" set="contact.id"/>
            <t:select path = "//mail:ModifyContactResponse/mail:cn/mail:a" attr="firstName" emptyset="1"/>
            <t:select path = "//mail:ModifyContactResponse/mail:cn/mail:a" attr="lastName" emptyset="1"/>
            <t:select path = "//mail:ModifyContactResponse/mail:cn/mail:a" attr="email" emptyset="1"/>
        </t:response>
    </t:test>
    
    <t:test depends = "modifycontactrequest10b">
        <t:request>
            <GetContactsRequest xmlns = "urn:zimbraMail">
                <cn id = "${contact.id}"/>
            </GetContactsRequest>
        </t:request>
        <t:response>
            <t:select path = "//mail:GetContactsResponse/mail:cn/mail:a[@n='email']"  match = "${contact10.newemail}"/>
        </t:response>
    </t:test>
    
</t:test_case>

<t:property name="uploadFile1.name" value="${testMailRaw.root}/Contact/invalidimage.jpg"/>

<t:test_case testcaseid = "ModifyContactRequest11" type="bhr" bugid="71868">
    <t:objective>Modify a contact with invalid image file</t:objective>
    <t:steps>	1. Create a new contact 
    			2. Upload a invalid picture(text file renamed as jpg file) 
    			3. Modify the picture with upload-id
        		4. Server should return invalid image error code
    </t:steps>
    
    <t:test >
        <t:request>
            <CreateContactRequest xmlns = "urn:zimbraMail">
                <cn>
                    <a n = "firstName">${contact11.first}</a>
                    <a n = "lastName">${contact11.last}</a>                  
                </cn>
            </CreateContactRequest>
        </t:request>
        <t:response>
            <t:select path = "//mail:CreateContactResponse/mail:cn">
            <t:select attr = "id" set = "contact11.id"/>            
            </t:select>
        </t:response>
    </t:test>
    
	<t:uploadservlettest>
		<t:uploadServletRequest>
			<filename>${uploadFile1.name}</filename>
		</t:uploadServletRequest>
		<t:uploadServletResponse>
			<t:select attr="id" set="contactimage11.aid"/>
		</t:uploadServletResponse>
	</t:uploadservlettest>
	
	<t:test>
        <t:request>
            <ModifyContactRequest xmlns = "urn:zimbraMail">
                <cn id = "${contact11.id}">
                    <a n="image" aid="${contactimage11.aid}"/>
                </cn>
            </ModifyContactRequest>
        </t:request>
        <t:response>
             <t:select path = "//zimbra:Code" match="mail.INVALID_IMAGE"/>
        </t:response>
    </t:test>    
    
</t:test_case>


</t:tests>
