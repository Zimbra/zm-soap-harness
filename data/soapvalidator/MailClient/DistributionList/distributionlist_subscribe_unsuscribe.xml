<t:tests xmlns:t="urn:zimbraTestHarness">
<t:property name="account1.name" value="test.${TIME}.${COUNTER}@${defaultdomain.name}"/>
<t:property name="account2.name" value="test.${TIME}.${COUNTER}@${defaultdomain.name}"/>
<t:property name="account1.dl1.name" value="dl1.${TIME}.${COUNTER}@${defaultdomain.name}"/>
<t:property name="account1.dl2.name" value="dl2.${TIME}.${COUNTER}@${defaultdomain.name}"/>
<t:property name="account1.dl3.name" value="dl3.${TIME}.${COUNTER}@${defaultdomain.name}"/>
<t:property name="account1.dl4.name" value="dl4.${TIME}.${COUNTER}@${defaultdomain.name}"/>
<t:property name="account1.dl5.name" value="dl5.${TIME}.${COUNTER}@${defaultdomain.name}"/>
<t:property name="account1.dl6.name" value="dl6.${TIME}.${COUNTER}@${defaultdomain.name}"/>
<t:property name="account1.dl7.name" value="dl7.${TIME}.${COUNTER}@${defaultdomain.name}"/>
<t:property name="account1.dl8.name" value="dl8.${TIME}.${COUNTER}@${defaultdomain.name}"/>
<t:property name="account1.dl9.name" value="dl9.${TIME}.${COUNTER}@${defaultdomain.name}"/>
<t:property name="account1.dl10.name" value="dl10.${TIME}.${COUNTER}@${defaultdomain.name}"/>
<t:property name="account1.dl11.name" value="dl11.${TIME}.${COUNTER}@${defaultdomain.name}"/>

<t:property name="server.zimbraAdmin" value="${zimbraServer.name}"/>

<t:test_case testcaseid="Ping" type="always" >
 <t:objective>basic system check</t:objective>
    <t:test required="true">
     <t:request>
       <PingRequest xmlns="urn:zimbraAdmin"/>
     </t:request>
      <t:response>
        <t:select path="//admin:PingResponse"/>
     </t:response>
    </t:test>
</t:test_case>


<t:test_case testcaseid="admin_auth" type="always" >
 <t:objective>login as the admin</t:objective>
	<t:test required="true" >
		<t:request>
			<AuthRequest xmlns="urn:zimbraAdmin">
				<name>${admin.user}</name>
				<password>${admin.password}</password>
			</AuthRequest>
		</t:request>
		<t:response>
			<t:select path="//admin:AuthResponse/admin:authToken" set="authToken"/>
		</t:response>
	</t:test>

	<t:test required="true">
		<t:request>
			<CreateAccountRequest xmlns="urn:zimbraAdmin">
				<name>${account1.name}</name>
				<password>${defaultpassword.value}</password>
			</CreateAccountRequest>
		</t:request>
		<t:response>
			<t:select path="//admin:CreateAccountResponse/admin:account" attr="id"  set="account1.id"/>
			<t:select path='//admin:CreateAccountResponse/admin:account/admin:a[@n="zimbraMailHost"]' set="account1.server"/>
		</t:response>
	</t:test>

	<t:test required="true">
		<t:request>
			<CreateAccountRequest xmlns="urn:zimbraAdmin">
				<name>${account2.name}</name>
				<password>${defaultpassword.value}</password>
			</CreateAccountRequest>
		</t:request>
		<t:response>
			<t:select path="//admin:CreateAccountResponse/admin:account" attr="id"  set="account2.id"/>
			<t:select path='//admin:CreateAccountResponse/admin:account/admin:a[@n="zimbraMailHost"]' set="account2.server"/>
		</t:response>
	</t:test>

	<t:property name="server.zimbraAdmin" value="${account1.server}"/>
	<t:test required="true">
		<t:request>
			<GrantRightRequest xmlns="urn:zimbraAdmin">
				<target xmlns="" by="name" type="domain">${defaultdomain.name}</target>
				<grantee xmlns="" by="name" type="usr">${account1.name}</grantee>
				<right xmlns="">createDistList</right>
			</GrantRightRequest>
		</t:request>
		<t:response>
		</t:response>
	</t:test>

</t:test_case>


<t:test_case testcaseid="SubscribeDistributionListRequest01" type="smoke" bugids="" >
    <t:objective>Create Distribution in user1 zimbraDistributionListSubscriptionPolicy = APPROVE and login to user2 and subscribe to the list. </t:objective>    
    <t:steps>
    </t:steps>

	<t:property name="server.zimbraAccount" value="${account1.server}"/>

    <t:test >
        <t:request >
            <AuthRequest xmlns="urn:zimbraAccount">
                <account by="name">${account1.name}</account>
                <password>${defaultpassword.value}</password>
            </AuthRequest>
        </t:request>
        <t:response>
            <t:select path="//acct:AuthResponse/acct:authToken" set="authToken"/>
        </t:response>
    </t:test> 



    <t:test >
        <t:request >
            <CreateDistributionListRequest xmlns="urn:zimbraAccount" >
                 <name>${account1.dl1.name}</name>
                 <a n='zimbraDistributionListSubscriptionPolicy'>ACCEPT</a>
          	</CreateDistributionListRequest>
        </t:request>
        <t:response>
        	<t:select path="//acct:CreateDistributionListResponse/acct:dl" attr="id" set="account1.dl1.id" />
    		<!-- <t:select path="//acct:CreateDistributionListResponse/acct:dl/acct:owners/acct:owner" attr="id" match="${account1.id}" /> -->
        </t:response>
    </t:test> 


	<t:property name="server.zimbraAccount" value="${account2.server}"/>

    <t:test >
        <t:request >
            <AuthRequest xmlns="urn:zimbraAccount">
                <account by="name">${account2.name}</account>
                <password>${defaultpassword.value}</password>
            </AuthRequest>
        </t:request>
        <t:response>
            <t:select path="//acct:AuthResponse/acct:authToken" set="authToken"/>
        </t:response>
    </t:test> 
    
     <t:test >
        <t:request>
            <SubscribeDistributionListRequest  xmlns="urn:zimbraAccount" op="subscribe">
  				<dl by="id">${account1.dl1.id}</dl>
			</SubscribeDistributionListRequest>
        </t:request>
        <t:response>
            <t:select path="//SubscribeDistributionListResponse" attr="status" match="subscribed" />
        </t:response>
    </t:test> 
    
    <t:test >
        <t:request >
            <GetAccountDistributionListsRequest xmlns="urn:zimbraAccount" />
        </t:request>
       <t:response>
        	<t:select path="//acct:GetAccountDistributionListsResponse/acct:dl" attr="name" match="${account1.dl1.name}"/>
        	<t:select path="//acct:GetAccountDistributionListsResponse/acct:dl" attr="id" match="${account1.dl1.id}"/>
       </t:response>
    </t:test> 
 
 	<t:property name="server.zimbraAccount" value="${account1.server}"/>
    
        <t:test >
        <t:request >
            <AuthRequest xmlns="urn:zimbraAccount">
                <account by="name">${account1.name}</account>
                <password>${defaultpassword.value}</password>
            </AuthRequest>
        </t:request>
        <t:response>
            <t:select path="//acct:AuthResponse/acct:authToken" set="authToken"/>
        </t:response>
    </t:test> 
    
    <t:test >
        <t:request >
            <GetDistributionListMembersRequest xmlns="urn:zimbraAccount" >
            	<dl>${account1.dl1.name}</dl>
          	</GetDistributionListMembersRequest>
        </t:request>
        <t:response>
			<t:select path="//acct:GetDistributionListMembersResponse/acct:dlm" match="${account2.name}"/>
        </t:response>
</t:test>

</t:test_case>

<t:test_case testcaseid="SubscribeDistributionListRequest02" type="smoke" bugids="" >
    <t:objective>Create Distribution in user1 zimbraDistributionListSubscriptionPolicy = APPROVE and login to user2 and subscribe to the list by DL name. </t:objective>    
    <t:steps>
    </t:steps>

	<t:property name="server.zimbraAccount" value="${account1.server}"/>

    <t:test >
        <t:request >
            <AuthRequest xmlns="urn:zimbraAccount">
                <account by="name">${account1.name}</account>
                <password>${defaultpassword.value}</password>
            </AuthRequest>
        </t:request>
        <t:response>
            <t:select path="//acct:AuthResponse/acct:authToken" set="authToken"/>
        </t:response>
    </t:test> 



    <t:test >
        <t:request >
            <CreateDistributionListRequest xmlns="urn:zimbraAccount" >
                 <name>${account1.dl2.name}</name>
                 <a n='zimbraDistributionListSubscriptionPolicy'>ACCEPT</a>
          	</CreateDistributionListRequest>
        </t:request>
        <t:response>
        	<t:select path="//acct:CreateDistributionListResponse/acct:dl" attr="id" set="account1.dl2.id" />
    		<!--  <t:select path="//acct:CreateDistributionListResponse/acct:dl/acct:owners/acct:owner" attr="id" match="${account1.id}" /> -->
        </t:response>
    </t:test> 


	<t:property name="server.zimbraAccount" value="${account2.server}"/>

    <t:test >
        <t:request >
            <AuthRequest xmlns="urn:zimbraAccount">
                <account by="name">${account2.name}</account>
                <password>${defaultpassword.value}</password>
            </AuthRequest>
        </t:request>
        <t:response>
            <t:select path="//acct:AuthResponse/acct:authToken" set="authToken"/>
        </t:response>
    </t:test> 
    
     <t:test >
        <t:request>
            <SubscribeDistributionListRequest  xmlns="urn:zimbraAccount" op="subscribe">
  				<dl by="name">${account1.dl2.name}</dl>
			</SubscribeDistributionListRequest>
        </t:request>
        <t:response>
            <t:select path="//SubscribeDistributionListResponse" attr="status" match="subscribed" />
        </t:response>
    </t:test> 
    



    
    <t:test >
        <t:request >
            <GetAccountDistributionListsRequest xmlns="urn:zimbraAccount" />
        </t:request>
       <t:response>
        	<t:select path="//acct:GetAccountDistributionListsResponse/acct:dl" attr="name" match="${account1.dl2.name}"/>
        	<t:select path="//acct:GetAccountDistributionListsResponse/acct:dl" attr="id" match="${account1.dl2.id}"/>
       </t:response>
    </t:test> 
    
	<t:property name="server.zimbraAccount" value="${account1.server}"/>

        <t:test >
        <t:request >
            <AuthRequest xmlns="urn:zimbraAccount">
                <account by="name">${account1.name}</account>
                <password>${defaultpassword.value}</password>
            </AuthRequest>
        </t:request>
        <t:response>
            <t:select path="//acct:AuthResponse/acct:authToken" set="authToken"/>
        </t:response>
    </t:test> 
    
    <t:test >
        <t:request >
            <GetDistributionListMembersRequest xmlns="urn:zimbraAccount" >
            	<dl>${account1.dl2.name}</dl>
          	</GetDistributionListMembersRequest>
        </t:request>
        <t:response>
			<t:select path="//acct:GetDistributionListMembersResponse/acct:dlm" match="${account2.name}"/>
        </t:response>
</t:test>

</t:test_case>


<t:test_case testcaseid="SubscribeDistributionListRequest03" type="smoke" bugids="" >
    <t:objective>Create Distribution in user1 zimbraDistributionListSubscriptionPolicy = REJECT and login to user2 and subscribe to the list by DL name should give Perm denied. </t:objective>    
    <t:steps>
    </t:steps>

	<t:property name="server.zimbraAccount" value="${account1.server}"/>

    <t:test >
        <t:request >
            <AuthRequest xmlns="urn:zimbraAccount">
                <account by="name">${account1.name}</account>
                <password>${defaultpassword.value}</password>
            </AuthRequest>
        </t:request>
        <t:response>
            <t:select path="//acct:AuthResponse/acct:authToken" set="authToken"/>
        </t:response>
    </t:test> 



    <t:test >
        <t:request >
            <CreateDistributionListRequest xmlns="urn:zimbraAccount" >
                 <name>${account1.dl3.name}</name>
                 <a n='zimbraDistributionListSubscriptionPolicy'>REJECT</a>
          	</CreateDistributionListRequest>
        </t:request>
        <t:response>
        	<t:select path="//acct:CreateDistributionListResponse/acct:dl" attr="id" set="account1.dl3.id" />
    		<!-- <t:select path="//acct:CreateDistributionListResponse/acct:dl/acct:owners/acct:owner" attr="id" match="${account1.id}" /> -->
        </t:response>
    </t:test> 


	<t:property name="server.zimbraAccount" value="${account2.server}"/>

    <t:test >
        <t:request >
            <AuthRequest xmlns="urn:zimbraAccount">
                <account by="name">${account2.name}</account>
                <password>${defaultpassword.value}</password>
            </AuthRequest>
        </t:request>
        <t:response>
            <t:select path="//acct:AuthResponse/acct:authToken" set="authToken"/>
        </t:response>
    </t:test> 
    
     <t:test >
        <t:request>
            <SubscribeDistributionListRequest  xmlns="urn:zimbraAccount" op="subscribe">
  				<dl by="name">${account1.dl3.name}</dl>
			</SubscribeDistributionListRequest>
        </t:request>
        <t:response>
            <t:select path="//zimbra:Code" match="service.PERM_DENIED" />
        </t:response>
    </t:test> 
    


    
    <t:test >
        <t:request >
            <GetAccountDistributionListsRequest xmlns="urn:zimbraAccount" />
        </t:request>
       <t:response>
        	<t:select path="//acct:GetAccountDistributionListsResponse/acct:dl" attr="name" match="${account1.dl3.name}" emptyset="1"/>
        	<t:select path="//acct:GetAccountDistributionListsResponse/acct:dl" attr="id" match="${account1.dl3.id}"  emptyset="1"/>
       </t:response>
    </t:test> 
   
   	<t:property name="server.zimbraAccount" value="${account1.server}"/>
    
   <t:test >
        <t:request >
            <AuthRequest xmlns="urn:zimbraAccount">
                <account by="name">${account1.name}</account>
                <password>${defaultpassword.value}</password>
            </AuthRequest>
        </t:request>
        <t:response>
            <t:select path="//acct:AuthResponse/acct:authToken" set="authToken"/>
        </t:response>
    </t:test> 
    
    <t:test >
        <t:request >
            <GetDistributionListMembersRequest xmlns="urn:zimbraAccount" >
            	<dl>${account1.dl3.name}</dl>
          	</GetDistributionListMembersRequest>
        </t:request>
        <t:response>
			<t:select path="//acct:GetDistributionListMembersResponse/acct:dlm" match="${account2.name}" emptyset="1"/>
        </t:response>
</t:test>
</t:test_case>

<t:test_case testcaseid="SubscribeDistributionListRequest04" type="smoke" bugids="" >
    <t:objective>Create Distribution in user1 zimbraDistributionListSubscriptionPolicy = APPROVAL and login to user2 and subscribe to the DL user1 approve the subscription  </t:objective>    
    <t:steps>
    </t:steps>

	<t:property name="server.zimbraAccount" value="${account1.server}"/>

    <t:test >
        <t:request >
            <AuthRequest xmlns="urn:zimbraAccount">
                <account by="name">${account1.name}</account>
                <password>${defaultpassword.value}</password>
            </AuthRequest>
        </t:request>
        <t:response>
            <t:select path="//acct:AuthResponse/acct:authToken" set="authToken"/>
        </t:response>
    </t:test> 



    <t:test >
        <t:request >
            <CreateDistributionListRequest xmlns="urn:zimbraAccount" >
                 <name>${account1.dl4.name}</name>
                 <a n='zimbraDistributionListSubscriptionPolicy'>APPROVAL</a>
          	</CreateDistributionListRequest>
        </t:request>
        <t:response>
        	<t:select path="//acct:CreateDistributionListResponse/acct:dl" attr="id" set="account1.dl4.id" />
    		<!--<t:select path="//acct:CreateDistributionListResponse/acct:dl/acct:owners/acct:owner" attr="id" match="${account1.id}" />-->
        </t:response>
    </t:test> 


	<t:property name="server.zimbraAccount" value="${account2.server}"/>

    <t:test >
        <t:request >
            <AuthRequest xmlns="urn:zimbraAccount">
                <account by="name">${account2.name}</account>
                <password>${defaultpassword.value}</password>
            </AuthRequest>
        </t:request>
        <t:response>
            <t:select path="//acct:AuthResponse/acct:authToken" set="authToken"/>
        </t:response>
    </t:test> 
    
     <t:test >
        <t:request>
            <SubscribeDistributionListRequest  xmlns="urn:zimbraAccount" op="subscribe">
  				<dl by="name">${account1.dl4.name}</dl>
			</SubscribeDistributionListRequest>
        </t:request>
        <t:response>
            <t:select path="//SubscribeDistributionListResponse" attr="status" match="awaiting_approval" />
        </t:response>
    </t:test> 
    
    
    <t:test >
        <t:request >
            <GetAccountDistributionListsRequest xmlns="urn:zimbraAccount" />
        </t:request>
       <t:response>
        	<t:select path="//acct:GetAccountDistributionListsResponse/acct:dl" attr="name" match="${account1.dl4.name}" emptyset="1"/>
        	<t:select path="//acct:GetAccountDistributionListsResponse/acct:dl" attr="id" match="${account1.dl4.id}" emptyset="1"/>
       </t:response>
    </t:test> 
   
   	<t:property name="server.zimbraAccount" value="${account1.server}"/>
    
     <t:test >
        <t:request >
            <AuthRequest xmlns="urn:zimbraAccount">
                <account by="name">${account1.name}</account>
                <password>${defaultpassword.value}</password>
            </AuthRequest>
        </t:request>
        <t:response>
            <t:select path="//acct:AuthResponse/acct:authToken" set="authToken"/>
        </t:response>
    </t:test> 
    
    <t:test>
        <t:request>
            <SearchRequest xmlns="urn:zimbraMail" types="message">
                <query>${account1.dl4.name}</query>
            </SearchRequest>
        </t:request>
        <t:response>
            <t:select path="//mail:SearchResponse/mail:m"  attr="id" set="sub1.id">
            </t:select>
        </t:response>
    </t:test>
    
<!--	<t:property name="subscription.message.part"  value='&lt;dlSubs xmlns="urn:zimbraDLSubscription" version="0.1" action="subscribe"&gt; &lt;dl id="${account1.dl4.id}" email="${account1.dl4.name}" name=""//&gt; &lt;user id="${account2.id}" email="${account2.name}" name=""//&gt; &lt;/dlSubs&gt;' />-->
<!--	  -->
<!--     <t:test>-->
<!--        <t:request>-->
<!--    	<GetMsgRequest  xmlns="urn:zimbraMail">-->
<!-- 			<m id="${sub1.id}"/>-->
<!--		</GetMsgRequest>-->
<!--        </t:request>-->
<!--        <t:response>-->
<!--        <t:select path="//mail:dlSubs/mail:content" set="a" />-->
<!--        </t:response>-->
<!--    </t:test>-->
<!--    <t:echo>${a}</t:echo>-->
<!--    -->
      <t:test >
        <t:request >
            <DistributionListActionRequest xmlns="urn:zimbraAccount" >
            	<dl by="id">${account1.dl4.id}</dl>
                 <action op="acceptSubsReq">
                      <subsReq op="subscribe" >${account2.name}</subsReq>
                 </action>
          	</DistributionListActionRequest>
        </t:request>
        <t:response>
        	<t:select path="//acct:DistributionListActionResponse" />
        </t:response>
    </t:test> 
      <t:test >
        <t:request >
            <GetDistributionListMembersRequest xmlns="urn:zimbraAccount" >
            	<dl>${account1.dl4.name}</dl>
          	</GetDistributionListMembersRequest>
        </t:request>
        <t:response>
			<t:select path="//acct:GetDistributionListMembersResponse/acct:dlm" match="${account2.name}"/>
        </t:response>
        </t:test>
    
    	<t:property name="server.zimbraAccount" value="${account2.server}"/>

    <t:test >
        <t:request >
            <AuthRequest xmlns="urn:zimbraAccount">
                <account by="name">${account2.name}</account>
                <password>${defaultpassword.value}</password>
            </AuthRequest>
        </t:request>
        <t:response>
            <t:select path="//acct:AuthResponse/acct:authToken" set="authToken"/>
        </t:response>
    </t:test> 


    <t:test >
        <t:request >
            <GetAccountDistributionListsRequest xmlns="urn:zimbraAccount" />
        </t:request>
       <t:response>
        	<t:select path="//acct:GetAccountDistributionListsResponse/acct:dl" attr="name" match="${account1.dl4.name}"/>
        	<t:select path="//acct:GetAccountDistributionListsResponse/acct:dl" attr="id" match="${account1.dl4.id}"/>
       </t:response>
    </t:test> 

</t:test_case>



<t:test_case testcaseid="SubscribeDistributionListRequest05" type="smoke" bugids="" >
    <t:objective>Create Distribution in user1 zimbraDistributionListSubscriptionPolicy = APPROVAL and zimbraDistributionListUnSubscriptionPolicy = APPROVAL and login to user2 and subscribe to the DL user1 approve the subscription  user2 send request Unsubscribe DL to user1   </t:objective>    
    <t:steps>
    </t:steps>

	<t:property name="server.zimbraAccount" value="${account1.server}"/>

    <t:test >
        <t:request >
            <AuthRequest xmlns="urn:zimbraAccount">
                <account by="name">${account1.name}</account>
                <password>${defaultpassword.value}</password>
            </AuthRequest>
        </t:request>
        <t:response>
            <t:select path="//acct:AuthResponse/acct:authToken" set="authToken"/>
        </t:response>
    </t:test> 



    <t:test >
        <t:request >
            <CreateDistributionListRequest xmlns="urn:zimbraAccount" >
                 <name>${account1.dl5.name}</name>
                 <a n='zimbraDistributionListSubscriptionPolicy'>APPROVAL</a>
                 <a n='zimbraDistributionListUnsubscriptionPolicy'>APPROVAL</a>
          	</CreateDistributionListRequest>
        </t:request>
        <t:response>
        	<t:select path="//acct:CreateDistributionListResponse/acct:dl" attr="id" set="account1.dl5.id" />
    		<!--<t:select path="//acct:CreateDistributionListResponse/acct:dl/acct:owners/acct:owner" attr="id" match="${account1.id}" />-->
        </t:response>
    </t:test> 


	<t:property name="server.zimbraAccount" value="${account2.server}"/>

    <t:test >
        <t:request >
            <AuthRequest xmlns="urn:zimbraAccount">
                <account by="name">${account2.name}</account>
                <password>${defaultpassword.value}</password>
            </AuthRequest>
        </t:request>
        <t:response>
            <t:select path="//acct:AuthResponse/acct:authToken" set="authToken"/>
        </t:response>
    </t:test> 
    
     <t:test >
        <t:request>
            <SubscribeDistributionListRequest  xmlns="urn:zimbraAccount" op="subscribe">
  				<dl by="name">${account1.dl5.name}</dl>
			</SubscribeDistributionListRequest>
        </t:request>
        <t:response>
            <t:select path="//SubscribeDistributionListResponse" attr="status" match="awaiting_approval" />
        </t:response>
    </t:test> 
    
    
    <t:test >
        <t:request >
            <GetAccountDistributionListsRequest xmlns="urn:zimbraAccount" />
        </t:request>
       <t:response>
        	<t:select path="//acct:GetAccountDistributionListsResponse/acct:dl" attr="name" match="${account1.dl5.name}" emptyset="1"/>
        	<t:select path="//acct:GetAccountDistributionListsResponse/acct:dl" attr="id" match="${account1.dl5.id}" emptyset="1"/>
       </t:response>
    </t:test> 
   
   	<t:property name="server.zimbraAccount" value="${account1.server}"/>
    
     <t:test >
        <t:request >
            <AuthRequest xmlns="urn:zimbraAccount">
                <account by="name">${account1.name}</account>
                <password>${defaultpassword.value}</password>
            </AuthRequest>
        </t:request>
        <t:response>
            <t:select path="//acct:AuthResponse/acct:authToken" set="authToken"/>
        </t:response>
    </t:test> 
    
    <t:test>
        <t:request>
            <SearchRequest xmlns="urn:zimbraMail" types="message">
                <query>${account1.dl5.name}</query>
            </SearchRequest>
        </t:request>
        <t:response>
            <t:select path="//mail:SearchResponse/mail:m"  attr="id" set="sub1.id">
            </t:select>
        </t:response>
    </t:test>
    
	<t:property name="subscription.message.part"  value='&lt;dlSubs xmlns="urn:zimbraDLSubscription" version="0.1" action="subscribe"&gt; &lt;dl id="${account1.dl5.id}" email="${account1.dl5.name}" name=""//&gt; &lt;user id="${account2.id}" email="${account2.name}" name=""//&gt; &lt;/dlSubs&gt;' />
	  
<!--     <t:test>-->
<!--        <t:request>-->
<!--    	<GetMsgRequest  xmlns="urn:zimbraMail">-->
<!-- 			<m id="${sub1.id}"/>-->
<!--		</GetMsgRequest>-->
<!--        </t:request>-->
<!--        <t:response>-->
<!--        <t:select path="//mail:dlSubs/mail:content" set="a" />-->
<!--  	        </t:response>-->
<!--    </t:test>-->
<!--    <t:echo>${a}</t:echo>-->
<!--    -->
      <t:test >
        <t:request >
            <DistributionListActionRequest xmlns="urn:zimbraAccount" >
            	<dl by="id">${account1.dl5.id}</dl>
                 <action op="acceptSubsReq">
                      <subsReq op="subscribe" >${account2.name}</subsReq>
                 </action>
          	</DistributionListActionRequest>
        </t:request>
        <t:response>
        	<t:select path="//acct:DistributionListActionResponse" />
        </t:response>
    </t:test> 
      <t:test >
        <t:request >
            <GetDistributionListMembersRequest xmlns="urn:zimbraAccount" >
            	<dl>${account1.dl5.name}</dl>
          	</GetDistributionListMembersRequest>
        </t:request>
        <t:response>
			<t:select path="//acct:GetDistributionListMembersResponse/acct:dlm" match="${account2.name}"/>
        </t:response>
        </t:test>
    
    	<t:property name="server.zimbraAccount" value="${account2.server}"/>

    <t:test >
        <t:request >
            <AuthRequest xmlns="urn:zimbraAccount">
                <account by="name">${account2.name}</account>
                <password>${defaultpassword.value}</password>
            </AuthRequest>
        </t:request>
        <t:response>
            <t:select path="//acct:AuthResponse/acct:authToken" set="authToken"/>
        </t:response>
    </t:test> 
    
    <t:test >
        <t:request >
            <GetAccountDistributionListsRequest xmlns="urn:zimbraAccount" />
        </t:request>
       <t:response>
        	<t:select path="//acct:GetAccountDistributionListsResponse/acct:dl" attr="name" match="${account1.dl5.name}"/>
        	<t:select path="//acct:GetAccountDistributionListsResponse/acct:dl" attr="id" match="${account1.dl5.id}"/>
       </t:response>
    </t:test> 
    
    <t:test >
        <t:request>
            <SubscribeDistributionListRequest  xmlns="urn:zimbraAccount" op="unsubscribe">
  				<dl by="name">${account1.dl5.name}</dl>
			</SubscribeDistributionListRequest>
        </t:request>
        <t:response>
            <t:select path="//SubscribeDistributionListResponse" attr="status" match="awaiting_approval" />
        </t:response>
    </t:test> 
    
    
   	<t:property name="server.zimbraAccount" value="${account1.server}"/>
    
     <t:test >
        <t:request >
            <AuthRequest xmlns="urn:zimbraAccount">
                <account by="name">${account1.name}</account>
                <password>${defaultpassword.value}</password>
            </AuthRequest>
        </t:request>
        <t:response>
            <t:select path="//acct:AuthResponse/acct:authToken" set="authToken"/>
        </t:response>
    </t:test> 
    
    <t:test>
        <t:request>
            <SearchRequest xmlns="urn:zimbraMail" types="message">
                <query>${account1.dl5.name}</query>
            </SearchRequest>
        </t:request>
        <t:response>
            <t:select path="//mail:SearchResponse/mail:m"  attr="id" set="sub1.id">
            </t:select>
        </t:response>
    </t:test>
    
	<t:property name="subscription.message.part"  value='&lt;dlSubs xmlns="urn:zimbraDLSubscription" version="0.1" action="subscribe"&gt; &lt;dl id="${account1.dl5.id}" email="${account1.dl5.name}" name=""//&gt; &lt;user id="${account2.id}" email="${account2.name}" name=""//&gt; &lt;/dlSubs&gt;' />
	  
<!--     <t:test>-->
<!--        <t:request>-->
<!--    	<GetMsgRequest  xmlns="urn:zimbraMail">-->
<!-- 			<m id="${sub1.id}"/>-->
<!--		</GetMsgRequest>-->
<!--        </t:request>-->
<!--        <t:response>-->
<!--        <t:select path="//mail:dlSubs/mail:content" set="a" />-->

<!--        </t:response>-->
<!--    </t:test>-->
<!--    <t:echo>${a}</t:echo>-->
<!--    -->
      <t:test >
        <t:request >
            <DistributionListActionRequest xmlns="urn:zimbraAccount" >
            	<dl by="id">${account1.dl5.id}</dl>
                 <action op="acceptSubsReq">
                      <subsReq op="unsubscribe" >${account2.name}</subsReq>
                 </action>
          	</DistributionListActionRequest>
        </t:request>
        <t:response>
        	<t:select path="//acct:DistributionListActionResponse" />
        </t:response>
    </t:test> 
      <t:test >
        <t:request >
            <GetDistributionListMembersRequest xmlns="urn:zimbraAccount" >
            	<dl>${account1.dl5.name}</dl>
          	</GetDistributionListMembersRequest>
        </t:request>
        <t:response>
			<t:select path="//acct:GetDistributionListMembersResponse/acct:dlm" match="${account2.name}" emptyset="1"/>
        </t:response>
        </t:test>
    
    	<t:property name="server.zimbraAccount" value="${account2.server}"/>

    <t:test >
        <t:request >
            <AuthRequest xmlns="urn:zimbraAccount">
                <account by="name">${account2.name}</account>
                <password>${defaultpassword.value}</password>
            </AuthRequest>
        </t:request>
        <t:response>
            <t:select path="//acct:AuthResponse/acct:authToken" set="authToken"/>
        </t:response>
    </t:test> 
    
    <t:test >
        <t:request >
            <GetAccountDistributionListsRequest xmlns="urn:zimbraAccount" />
        </t:request>
       <t:response>
        	<t:select path="//acct:GetAccountDistributionListsResponse/acct:dl" attr="name" match="${account1.dl5.name}" emptyset="1"/>
        	<t:select path="//acct:GetAccountDistributionListsResponse/acct:dl" attr="id" match="${account1.dl5.id}" emptyset="1"/>
       </t:response>
    </t:test> 
 </t:test_case>
 
 <t:test_case testcaseid="SubscribeDistributionListRequest06" type="smoke" bugids="" >
    <t:objective>Create Distribution in user1 zimbraDistributionListSubscriptionPolicy = APPROVAL and zimbraDistributionListUnsubscriptionPolicy = REJECT and login to user2 and subscribe to the DL user1 approve the subscription  user2 send request Unsubscribe DL to user1 should ger PERM Denied  </t:objective>    
    <t:steps>
    </t:steps>

	<t:property name="server.zimbraAccount" value="${account1.server}"/>

    <t:test >
        <t:request >
            <AuthRequest xmlns="urn:zimbraAccount">
                <account by="name">${account1.name}</account>
                <password>${defaultpassword.value}</password>
            </AuthRequest>
        </t:request>
        <t:response>
            <t:select path="//acct:AuthResponse/acct:authToken" set="authToken"/>
        </t:response>
    </t:test> 



    <t:test >
        <t:request >
            <CreateDistributionListRequest xmlns="urn:zimbraAccount" >
                 <name>${account1.dl6.name}</name>
                 <a n='zimbraDistributionListSubscriptionPolicy'>APPROVAL</a>
                 <a n='zimbraDistributionListUnsubscriptionPolicy'>REJECT</a>
          	</CreateDistributionListRequest>
        </t:request>
        <t:response>
        	<t:select path="//acct:CreateDistributionListResponse/acct:dl" attr="id" set="account1.dl6.id" />
    		<!--<t:select path="//acct:CreateDistributionListResponse/acct:dl/acct:owners/acct:owner" attr="id" match="${account1.id}" />-->
        </t:response>
    </t:test> 


	<t:property name="server.zimbraAccount" value="${account2.server}"/>

    <t:test >
        <t:request >
            <AuthRequest xmlns="urn:zimbraAccount">
                <account by="name">${account2.name}</account>
                <password>${defaultpassword.value}</password>
            </AuthRequest>
        </t:request>
        <t:response>
            <t:select path="//acct:AuthResponse/acct:authToken" set="authToken"/>
        </t:response>
    </t:test> 
    
     <t:test >
        <t:request>
            <SubscribeDistributionListRequest  xmlns="urn:zimbraAccount" op="subscribe">
  				<dl by="name">${account1.dl6.name}</dl>
			</SubscribeDistributionListRequest>
        </t:request>
        <t:response>
            <t:select path="//SubscribeDistributionListResponse" attr="status" match="awaiting_approval" />
        </t:response>
    </t:test> 
    
    
    <t:test >
        <t:request >
            <GetAccountDistributionListsRequest xmlns="urn:zimbraAccount" />
        </t:request>
       <t:response>
        	<t:select path="//acct:GetAccountDistributionListsResponse/acct:dl" attr="name" match="${account1.dl6.name}" emptyset="1"/>
        	<t:select path="//acct:GetAccountDistributionListsResponse/acct:dl" attr="id" match="${account1.dl6.id}" emptyset="1"/>
       </t:response>
    </t:test> 
   
   	<t:property name="server.zimbraAccount" value="${account1.server}"/>
    
     <t:test >
        <t:request >
            <AuthRequest xmlns="urn:zimbraAccount">
                <account by="name">${account1.name}</account>
                <password>${defaultpassword.value}</password>
            </AuthRequest>
        </t:request>
        <t:response>
            <t:select path="//acct:AuthResponse/acct:authToken" set="authToken"/>
        </t:response>
    </t:test> 
    
    <t:test>
        <t:request>
            <SearchRequest xmlns="urn:zimbraMail" types="message">
                <query>${account1.dl6.name}</query>
            </SearchRequest>
        </t:request>
        <t:response>
            <t:select path="//mail:SearchResponse/mail:m"  attr="id" set="sub1.id">
            </t:select>
        </t:response>
    </t:test>
    
	<t:property name="subscription.message.part"  value='&lt;dlSubs xmlns="urn:zimbraDLSubscription" version="0.1" action="subscribe"&gt; &lt;dl id="${account1.dl6.id}" email="${account1.dl6.name}" name=""//&gt; &lt;user id="${account2.id}" email="${account2.name}" name=""//&gt; &lt;/dlSubs&gt;' />
	  
<!--     <t:test>-->
<!--        <t:request>-->
<!--    	<GetMsgRequest  xmlns="urn:zimbraMail">-->
<!-- 			<m id="${sub1.id}"/>-->
<!--		</GetMsgRequest>-->
<!--        </t:request>-->
<!--        <t:response>-->
<!--        <t:select path="//mail:dlSubs/mail:content" set="a" />-->
<!--  	        </t:response>-->
<!--    </t:test>-->
<!--    <t:echo>${a}</t:echo>-->
<!--    -->
      <t:test >
        <t:request >
            <DistributionListActionRequest xmlns="urn:zimbraAccount" >
            	<dl by="id">${account1.dl6.id}</dl>
                 <action op="acceptSubsReq">
                      <subsReq op="subscribe" >${account2.name}</subsReq>
                 </action>
          	</DistributionListActionRequest>
        </t:request>
        <t:response>
        	<t:select path="//acct:DistributionListActionResponse" />
        </t:response>
    </t:test> 
      <t:test >
        <t:request >
            <GetDistributionListMembersRequest xmlns="urn:zimbraAccount" >
            	<dl>${account1.dl6.name}</dl>
          	</GetDistributionListMembersRequest>
        </t:request>
        <t:response>
			<t:select path="//acct:GetDistributionListMembersResponse/acct:dlm" match="${account2.name}"/>
        </t:response>
        </t:test>
    
    	<t:property name="server.zimbraAccount" value="${account2.server}"/>

    <t:test >
        <t:request >
            <AuthRequest xmlns="urn:zimbraAccount">
                <account by="name">${account2.name}</account>
                <password>${defaultpassword.value}</password>
            </AuthRequest>
        </t:request>
        <t:response>
            <t:select path="//acct:AuthResponse/acct:authToken" set="authToken"/>
        </t:response>
    </t:test> 
    
    <t:test >
        <t:request >
            <GetAccountDistributionListsRequest xmlns="urn:zimbraAccount" />
        </t:request>
       <t:response>
        	<t:select path="//acct:GetAccountDistributionListsResponse/acct:dl" attr="name" match="${account1.dl6.name}"/>
        	<t:select path="//acct:GetAccountDistributionListsResponse/acct:dl" attr="id" match="${account1.dl6.id}"/>
       </t:response>
    </t:test> 
    
    <t:test >
        <t:request>
            <SubscribeDistributionListRequest  xmlns="urn:zimbraAccount" op="unsubscribe">
  				<dl by="name">${account1.dl6.name}</dl>
			</SubscribeDistributionListRequest>
        </t:request>
        <t:response>
            <t:select path="//zimbra:Code" match="service.PERM_DENIED" />
        </t:response>
    </t:test> 
 
 
 </t:test_case>
 
 
<t:test_case testcaseid="SubscribeDistributionListRequest07" type="smoke" bugids="" >
    <t:objective>Create Distribution in user1 zimbraDistributionListSubscriptionPolicy = APPROVAL and zimbraDistributionListUnSubscriptionPolicy = ACCEPT and login to user2 and subscribe to the DL user1 approve the subscription  user2 Unsubscribe DL get effected    </t:objective>    
    <t:steps>
    </t:steps>

	<t:property name="server.zimbraAccount" value="${account1.server}"/>

    <t:test >
        <t:request >
            <AuthRequest xmlns="urn:zimbraAccount">
                <account by="name">${account1.name}</account>
                <password>${defaultpassword.value}</password>
            </AuthRequest>
        </t:request>
        <t:response>
            <t:select path="//acct:AuthResponse/acct:authToken" set="authToken"/>
        </t:response>
    </t:test> 



    <t:test >
        <t:request >
            <CreateDistributionListRequest xmlns="urn:zimbraAccount" >
                 <name>${account1.dl7.name}</name>
                 <a n='zimbraDistributionListSubscriptionPolicy'>APPROVAL</a>
                 <a n='zimbraDistributionListUnsubscriptionPolicy'>ACCEPT</a>
          	</CreateDistributionListRequest>
        </t:request>
        <t:response>
        	<t:select path="//acct:CreateDistributionListResponse/acct:dl" attr="id" set="account1.dl7.id" />
    		<!--<t:select path="//acct:CreateDistributionListResponse/acct:dl/acct:owners/acct:owner" attr="id" match="${account1.id}" /> -->
        </t:response>
    </t:test> 


	<t:property name="server.zimbraAccount" value="${account2.server}"/>

    <t:test >
        <t:request >
            <AuthRequest xmlns="urn:zimbraAccount">
                <account by="name">${account2.name}</account>
                <password>${defaultpassword.value}</password>
            </AuthRequest>
        </t:request>
        <t:response>
            <t:select path="//acct:AuthResponse/acct:authToken" set="authToken"/>
        </t:response>
    </t:test> 
    
     <t:test >
        <t:request>
            <SubscribeDistributionListRequest  xmlns="urn:zimbraAccount" op="subscribe">
  				<dl by="name">${account1.dl7.name}</dl>
			</SubscribeDistributionListRequest>
        </t:request>
        <t:response>
            <t:select path="//SubscribeDistributionListResponse" attr="status" match="awaiting_approval" />
        </t:response>
    </t:test> 
    
    
    <t:test >
        <t:request >
            <GetAccountDistributionListsRequest xmlns="urn:zimbraAccount" />
        </t:request>
       <t:response>
        	<t:select path="//acct:GetAccountDistributionListsResponse/acct:dl" attr="name" match="${account1.dl7.name}" emptyset="1"/>
        	<t:select path="//acct:GetAccountDistributionListsResponse/acct:dl" attr="id" match="${account1.dl7.id}" emptyset="1"/>
       </t:response>
    </t:test> 
   
   	<t:property name="server.zimbraAccount" value="${account1.server}"/>
    
     <t:test >
        <t:request >
            <AuthRequest xmlns="urn:zimbraAccount">
                <account by="name">${account1.name}</account>
                <password>${defaultpassword.value}</password>
            </AuthRequest>
        </t:request>
        <t:response>
            <t:select path="//acct:AuthResponse/acct:authToken" set="authToken"/>
        </t:response>
    </t:test> 
    
    <t:test>
        <t:request>
            <SearchRequest xmlns="urn:zimbraMail" types="message">
                <query>${account1.dl7.name}</query>
            </SearchRequest>
        </t:request>
        <t:response>
            <t:select path="//mail:SearchResponse/mail:m"  attr="id" set="sub1.id">
            </t:select>
        </t:response>
    </t:test>
    
	<t:property name="subscription.message.part"  value='&lt;dlSubs xmlns="urn:zimbraDLSubscription" version="0.1" action="subscribe"&gt; &lt;dl id="${account1.dl7.id}" email="${account1.dl7.name}" name=""//&gt; &lt;user id="${account2.id}" email="${account2.name}" name=""//&gt; &lt;/dlSubs&gt;' />
	  
<!--     <t:test>-->
<!--        <t:request>-->
<!--    	<GetMsgRequest  xmlns="urn:zimbraMail">-->
<!-- 			<m id="${sub1.id}"/>-->
<!--		</GetMsgRequest>-->
<!--        </t:request>-->
<!--        <t:response>-->
<!--        <t:select path="//mail:dlSubs/mail:content" set="a" />-->
<!--  	        </t:response>-->
<!--    </t:test>-->
<!--    <t:echo>${a}</t:echo>-->
<!--    -->
      <t:test >
        <t:request >
            <DistributionListActionRequest xmlns="urn:zimbraAccount" >
            	<dl by="id">${account1.dl7.id}</dl>
                 <action op="acceptSubsReq">
                      <subsReq op="subscribe" >${account2.name}</subsReq>
                 </action>
          	</DistributionListActionRequest>
        </t:request>
        <t:response>
        	<t:select path="//acct:DistributionListActionResponse" />
        </t:response>
    </t:test> 
      <t:test >
        <t:request >
            <GetDistributionListMembersRequest xmlns="urn:zimbraAccount" >
            	<dl>${account1.dl7.name}</dl>
          	</GetDistributionListMembersRequest>
        </t:request>
        <t:response>
			<t:select path="//acct:GetDistributionListMembersResponse/acct:dlm" match="${account2.name}"/>
        </t:response>
        </t:test>
    
    	<t:property name="server.zimbraAccount" value="${account2.server}"/>

    <t:test >
        <t:request >
            <AuthRequest xmlns="urn:zimbraAccount">
                <account by="name">${account2.name}</account>
                <password>${defaultpassword.value}</password>
            </AuthRequest>
        </t:request>
        <t:response>
            <t:select path="//acct:AuthResponse/acct:authToken" set="authToken"/>
        </t:response>
    </t:test> 
    
    <t:test >
        <t:request >
            <GetAccountDistributionListsRequest xmlns="urn:zimbraAccount" />
        </t:request>
       <t:response>
        	<t:select path="//acct:GetAccountDistributionListsResponse/acct:dl" attr="name" match="${account1.dl7.name}"/>
        	<t:select path="//acct:GetAccountDistributionListsResponse/acct:dl" attr="id" match="${account1.dl7.id}"/>
       </t:response>
    </t:test> 
    
    <t:test >
        <t:request>
            <SubscribeDistributionListRequest  xmlns="urn:zimbraAccount" op="unsubscribe">
  				<dl by="name">${account1.dl7.name}</dl>
			</SubscribeDistributionListRequest>
        </t:request>
        <t:response>
            <t:select path="//SubscribeDistributionListResponse" attr="status" match="unsubscribed" />
        </t:response>
    </t:test> 
    

    
    <t:test >
        <t:request >
            <GetAccountDistributionListsRequest xmlns="urn:zimbraAccount" />
        </t:request>
       <t:response>
        	<t:select path="//acct:GetAccountDistributionListsResponse/acct:dl" attr="name" match="${account1.dl7.name}" emptyset="1"/>
        	<t:select path="//acct:GetAccountDistributionListsResponse/acct:dl" attr="id" match="${account1.dl7.id}" emptyset="1"/>
       </t:response>
    </t:test> 
    
   	<t:property name="server.zimbraAccount" value="${account1.server}"/>
    
     <t:test >
        <t:request >
            <AuthRequest xmlns="urn:zimbraAccount">
                <account by="name">${account1.name}</account>
                <password>${defaultpassword.value}</password>
            </AuthRequest>
        </t:request>
        <t:response>
            <t:select path="//acct:AuthResponse/acct:authToken" set="authToken"/>
        </t:response>
    </t:test> 
    
 
      <t:test >
        <t:request >
            <GetDistributionListMembersRequest xmlns="urn:zimbraAccount" >
            	<dl>${account1.dl7.name}</dl>
          	</GetDistributionListMembersRequest>
        </t:request>
        <t:response>
			<t:select path="//acct:GetDistributionListMembersResponse/acct:dlm" match="${account2.name}" emptyset="1"/>
        </t:response>
        </t:test>
    


 </t:test_case>
 
 
 <t:test_case testcaseid="SubscribeDistributionListRequest08" type="smoke" bugids="" >
    <t:objective>Create Distribution in user1 zimbraDistributionListUnSubscriptionPolicy = ACCEPT and user2 add member and  user2 unsubscribe to the DL verify get effected    </t:objective>    
    <t:steps>
    </t:steps>

	<t:property name="server.zimbraAccount" value="${account1.server}"/>

    <t:test >
        <t:request >
            <AuthRequest xmlns="urn:zimbraAccount">
                <account by="name">${account1.name}</account>
                <password>${defaultpassword.value}</password>
            </AuthRequest>
        </t:request>
        <t:response>
            <t:select path="//acct:AuthResponse/acct:authToken" set="authToken"/>
        </t:response>
    </t:test> 



    <t:test >
        <t:request >
            <CreateDistributionListRequest xmlns="urn:zimbraAccount" >
                 <name>${account1.dl8.name}</name>
                 <a n='zimbraDistributionListUnsubscriptionPolicy'>ACCEPT</a>
          	</CreateDistributionListRequest>
        </t:request>
        <t:response>
        	<t:select path="//acct:CreateDistributionListResponse/acct:dl" attr="id" set="account1.dl8.id" />
    		<!--<t:select path="//acct:CreateDistributionListResponse/acct:dl/acct:owners/acct:owner" attr="id" match="${account1.id}" />-->
        </t:response>
    </t:test> 

    <t:test >
        <t:request >
            <DistributionListActionRequest xmlns="urn:zimbraAccount" >
            	<dl by="id">${account1.dl8.id}</dl>
                 <action op="addMembers">
                 	<dlm>${account2.name}</dlm>
                 </action>
          	</DistributionListActionRequest>
        </t:request>
        <t:response>
        	<t:select path="//acct:DistributionListActionResponse" />
        </t:response>
    </t:test> 

    	<t:property name="server.zimbraAccount" value="${account2.server}"/>

    <t:test >
        <t:request >
            <AuthRequest xmlns="urn:zimbraAccount">
                <account by="name">${account2.name}</account>
                <password>${defaultpassword.value}</password>
            </AuthRequest>
        </t:request>
        <t:response>
            <t:select path="//acct:AuthResponse/acct:authToken" set="authToken"/>
        </t:response>
    </t:test> 
    
    <t:test >
        <t:request >
            <GetAccountDistributionListsRequest xmlns="urn:zimbraAccount" />
        </t:request>
       <t:response>
        	<t:select path="//acct:GetAccountDistributionListsResponse/acct:dl" attr="name" match="${account1.dl8.name}"/>
        	<t:select path="//acct:GetAccountDistributionListsResponse/acct:dl" attr="id" match="${account1.dl8.id}"/>
       </t:response>
    </t:test> 
    
    <t:test >
        <t:request>
            <SubscribeDistributionListRequest  xmlns="urn:zimbraAccount" op="unsubscribe">
  				<dl by="name">${account1.dl8.name}</dl>
			</SubscribeDistributionListRequest>
        </t:request>
        <t:response>
            <t:select path="//SubscribeDistributionListResponse" attr="status" match="unsubscribed" />
        </t:response>
    </t:test> 
    

    
    <t:test >
        <t:request >
            <GetAccountDistributionListsRequest xmlns="urn:zimbraAccount" />
        </t:request>
       <t:response>
        	<t:select path="//acct:GetAccountDistributionListsResponse/acct:dl" attr="name" match="${account1.dl8.name}" emptyset="1"/>
        	<t:select path="//acct:GetAccountDistributionListsResponse/acct:dl" attr="id" match="${account1.dl8.id}" emptyset="1"/>
       </t:response>
    </t:test> 
    
   	<t:property name="server.zimbraAccount" value="${account1.server}"/>
    
     <t:test >
        <t:request >
            <AuthRequest xmlns="urn:zimbraAccount">
                <account by="name">${account1.name}</account>
                <password>${defaultpassword.value}</password>
            </AuthRequest>
        </t:request>
        <t:response>
            <t:select path="//acct:AuthResponse/acct:authToken" set="authToken"/>
        </t:response>
    </t:test> 
    
 
      <t:test >
        <t:request >
            <GetDistributionListMembersRequest xmlns="urn:zimbraAccount" >
            	<dl>${account1.dl8.name}</dl>
          	</GetDistributionListMembersRequest>
        </t:request>
        <t:response>
			<t:select path="//acct:GetDistributionListMembersResponse/acct:dlm" match="${account2.name}" emptyset="1"/>
        </t:response>
        </t:test>
    
 </t:test_case>
 
 <t:test_case testcaseid="SubscribeDistributionListRequest09" type="smoke" bugids="" >
    <t:objective>Create Distribution in user1 zimbraDistributionListUnSubscriptionPolicy = ACCEPT and user1 unsubscribe to the DL verify should not get effected    </t:objective>    
    <t:steps>
    </t:steps>

	<t:property name="server.zimbraAccount" value="${account1.server}"/>

    <t:test >
        <t:request >
            <AuthRequest xmlns="urn:zimbraAccount">
                <account by="name">${account1.name}</account>
                <password>${defaultpassword.value}</password>
            </AuthRequest>
        </t:request>
        <t:response>
            <t:select path="//acct:AuthResponse/acct:authToken" set="authToken"/>
        </t:response>
    </t:test> 



    <t:test >
        <t:request >
            <CreateDistributionListRequest xmlns="urn:zimbraAccount" >
                 <name>${account1.dl9.name}</name>
                 <a n='zimbraDistributionListUnsubscriptionPolicy'>ACCEPT</a>
          	</CreateDistributionListRequest>
        </t:request>
        <t:response>
        	<t:select path="//acct:CreateDistributionListResponse/acct:dl" attr="id" set="account1.dl9.id" />
    		<!--<t:select path="//acct:CreateDistributionListResponse/acct:dl/acct:owners/acct:owner" attr="id" match="${account1.id}" />-->
        </t:response>
    </t:test> 

    <t:test >
        <t:request >
            <GetAccountDistributionListsRequest xmlns="urn:zimbraAccount" />
        </t:request>
       <t:response>
        	<t:select path="//acct:GetAccountDistributionListsResponse/acct:dl" attr="name" match="${account1.dl9.name}" emptyset="1"/>
        	<t:select path="//acct:GetAccountDistributionListsResponse/acct:dl" attr="id" match="${account1.dl9.id}" emptyset="1"/>
       </t:response>
    </t:test> 
    
    <t:test >
        <t:request>
            <SubscribeDistributionListRequest  xmlns="urn:zimbraAccount" op="unsubscribe">
  				<dl by="name">${account1.dl9.name}</dl>
			</SubscribeDistributionListRequest>
        </t:request>
        <t:response>
            <t:select path="//zimbra:Code" match="account.NO_SUCH_MEMBER" />
        </t:response>
    </t:test> 
    

    
    <t:test >
        <t:request >
            <GetAccountDistributionListsRequest xmlns="urn:zimbraAccount" />
        </t:request>
       <t:response>
        	<t:select path="//acct:GetAccountDistributionListsResponse/acct:dl" attr="name" match="${account1.dl9.name}" emptyset="1"/>
        	<t:select path="//acct:GetAccountDistributionListsResponse/acct:dl" attr="id" match="${account1.dl9.id}" emptyset="1"/>
       </t:response>
    </t:test> 
    
 
      <t:test >
        <t:request >
            <GetDistributionListMembersRequest xmlns="urn:zimbraAccount" >
            	<dl>${account1.dl9.name}</dl>
          	</GetDistributionListMembersRequest>
        </t:request>
        <t:response>
			<t:select path="//acct:GetDistributionListMembersResponse/acct:dlm" match="${account1.name}" emptyset="1"/>
        </t:response>
        </t:test>
  
 </t:test_case>
 
 <t:test_case testcaseid="SubscribeDistributionListRequest10" type="smoke" bugids="" >
    <t:objective>Create Distribution in user1 zimbraDistributionListSubscriptionPolicy = ACCEPT and user1 subscribe itself to the DL verify should get effected    </t:objective>    
    <t:steps>
    </t:steps>

	<t:property name="server.zimbraAccount" value="${account1.server}"/>

    <t:test >
        <t:request >
            <AuthRequest xmlns="urn:zimbraAccount">
                <account by="name">${account1.name}</account>
                <password>${defaultpassword.value}</password>
            </AuthRequest>
        </t:request>
        <t:response>
            <t:select path="//acct:AuthResponse/acct:authToken" set="authToken"/>
        </t:response>
    </t:test> 



    <t:test >
        <t:request >
            <CreateDistributionListRequest xmlns="urn:zimbraAccount" >
                 <name>${account1.dl10.name}</name>
                  <a n='zimbraDistributionListSubscriptionPolicy'>ACCEPT</a>
                 <a n='zimbraDistributionListUnsubscriptionPolicy'>ACCEPT</a>
          	</CreateDistributionListRequest>
        </t:request>
        <t:response>
        	<t:select path="//acct:CreateDistributionListResponse/acct:dl" attr="id" set="account1.dl10.id" />
    		<!--<t:select path="//acct:CreateDistributionListResponse/acct:dl/acct:owners/acct:owner" attr="id" match="${account1.id}" />-->
        </t:response>
    </t:test> 

    <t:test >
        <t:request >
            <DistributionListActionRequest xmlns="urn:zimbraAccount" >
            	<dl by="id">${account1.dl10.id}</dl>
                 <action op="addMembers">
                 	<dlm>${account2.name}</dlm>
                 </action>
          	</DistributionListActionRequest>
        </t:request>
        <t:response>
        	<t:select path="//acct:DistributionListActionResponse" />
        </t:response>
    </t:test> 

    
    <t:test >
        <t:request >
            <GetAccountDistributionListsRequest xmlns="urn:zimbraAccount" />
        </t:request>
       <t:response>
        	<t:select path="//acct:GetAccountDistributionListsResponse/acct:dl" attr="name" match="${account1.dl10.name}" emptyset="1"/>
        	<t:select path="//acct:GetAccountDistributionListsResponse/acct:dl" attr="id" match="${account1.dl10.id}" emptyset="1"/>
       </t:response>
    </t:test> 
    
    <t:test >
        <t:request>
            <SubscribeDistributionListRequest  xmlns="urn:zimbraAccount" op="subscribe">
  				<dl by="name">${account1.dl10.name}</dl>
			</SubscribeDistributionListRequest>
        </t:request>
        <t:response>
            <t:select path="//SubscribeDistributionListResponse" attr="status" match="subscribed" />
        </t:response>
    </t:test> 
    

    
    <t:test >
        <t:request >
            <GetAccountDistributionListsRequest xmlns="urn:zimbraAccount" />
        </t:request>
       <t:response>
        	<t:select path="//acct:GetAccountDistributionListsResponse/acct:dl" attr="name" match="${account1.dl10.name}" />
        	<t:select path="//acct:GetAccountDistributionListsResponse/acct:dl" attr="id" match="${account1.dl10.id}" />
       </t:response>
    </t:test> 
    
 
      <t:test >
        <t:request >
            <GetDistributionListMembersRequest xmlns="urn:zimbraAccount" >
            	<dl>${account1.dl10.name}</dl>
          	</GetDistributionListMembersRequest>
        </t:request>
        <t:response>
			<t:select path="//acct:GetDistributionListMembersResponse/acct:dlm" match="${account1.name}" />
        </t:response>
        </t:test>
 </t:test_case>
</t:tests>