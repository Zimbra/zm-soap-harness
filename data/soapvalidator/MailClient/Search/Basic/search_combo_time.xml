<t:tests xmlns:t="urn:zimbraTestHarness">
<t:property name="test_acct.server" value="NOT_DEFINED"/>

<t:property name="server.zimbraAdmin" value="${zimbraServer.name}"/>

<t:property name="mail1.subject" value="email24A"/>
<t:property name="mail2.subject" value="email24B"/>
<t:property name="mail3.subject" value="email24C"/>
<t:property name="mail4.subject" value="email24D"/>
<t:property name="mail5.subject" value="email24E"/>
<t:property name="mail6.subject" value="email24F"/>
<t:property name="mail7.subject" value="email24G"/>

<t:property name="msgA.filename" value="${testMailRaw.root}/email24/email24A"/>
<t:property name="msgB.filename" value="${testMailRaw.root}/email24/email24B"/>
<t:property name="msgC.filename" value="${testMailRaw.root}/email24/email24C"/>
<t:property name="msgD.filename" value="${testMailRaw.root}/email24/email24D"/>
<t:property name="msgE.filename" value="${testMailRaw.root}/email24/email24E"/>
<t:property name="msgF.filename" value="${testMailRaw.root}/email24/email24F"/>
<t:property name="msgG.filename" value="${testMailRaw.root}/email24/email24G"/>

<t:property name="query.lasthour" value="(after:-1hour)"/>
<t:property name="query.last4hours" value="(after:-4hour)"/>
<t:property name="query.today" value="(after:-1day)"/>
<t:property name="query.yesterday" value="(after:-2day AND before:-1day)"/>
<t:property name="query.thisweek" value="(after:-1week)"/>
<t:property name="query.lastweek" value="(after:-2week AND before:-1week)"/>
<t:property name="query.thismonth" value="(after:-1month)"/>
<t:property name="query.lastmonth" value="(after:-2month AND before:-1month)"/>
<t:property name="query.thisyear" value="(after:-1year)"/>
<t:property name="query.lastyear" value="(after:-2year AND before:-1year)"/>

<t:property name="account24.user" value="acct${COUNTER}.${TIME}@${defaultdomain.name}"/>
<t:property name="account24.password" value="${defaultpassword.value}"/>


<t:property name="server.zimbraAdmin" value="${zimbraServer.name}"/>

<t:test_case testcaseid="account_setup_search_combo_time" type="always" >
    <t:objective>Create test account</t:objective>
    <steps> 1. Login to admin account
            2. Create a mail account 
            3. Inject mails using lmtp inject
    </steps>

    <t:test id="admin_login" required="true" >
        <t:request>
            <AuthRequest xmlns="urn:zimbraAdmin">
                <name>${admin.user}</name>
                <password>${admin.password}</password>
            </AuthRequest>
        </t:request>
        <t:response>
            <t:select path="//admin:AuthResponse/admin:authToken" set="authToken"/>
        </t:response>
    </t:test>
    
    <t:test id="create_test_account1"  required="true" depends="admin_login">
        <t:request>
            <CreateAccountRequest xmlns="urn:zimbraAdmin">
                <name>${account24.user}</name>
                <password>${defaultpassword.value}</password>
            </CreateAccountRequest>
        </t:request>
        <t:response>
            <t:select path="//admin:CreateAccountResponse/admin:account" attr="id"  set="account24.id"/>
            <t:select path='//admin:CreateAccountResponse/admin:account/admin:a[@n="zimbraMailHost"]' set="test_acct.server"/>

        </t:response>
    </t:test>

    <t:mailinjecttest >
        <t:lmtpInjectRequest>
            <filename>${msgA.filename}</filename>
            <to>${account24.user}</to>
            <from>${nonZimbraUser.name}</from>
            <server>${test_acct.server}</server>
			<modify>
			    <header a="X-Zimbra-Received">${XZIMBRARECEIVED(-2400s)}</header>
			</modify>
        </t:lmtpInjectRequest>
    </t:mailinjecttest>

    <t:mailinjecttest >
        <t:lmtpInjectRequest>
            <filename>${msgB.filename}</filename>
            <to>${account24.user}</to>
            <from>${nonZimbraUser.name}</from>
            <server>${test_acct.server}</server>
			<modify>
			    <header a="X-Zimbra-Received">${XZIMBRARECEIVED(-12000s)}</header>
			</modify>
        </t:lmtpInjectRequest>
    </t:mailinjecttest>

    <t:mailinjecttest >
        <t:lmtpInjectRequest>
            <filename>${msgC.filename}</filename>
            <to>${account24.user}</to>
            <from>${nonZimbraUser.name}</from>
            <server>${test_acct.server}</server>
			<modify>
			    <header a="X-Zimbra-Received">${XZIMBRARECEIVED(-84000s)}</header>
			</modify>
        </t:lmtpInjectRequest>
    </t:mailinjecttest>

    <t:mailinjecttest >
        <t:lmtpInjectRequest>
            <filename>${msgD.filename}</filename>
            <to>${account24.user}</to>
            <from>${nonZimbraUser.name}</from>
            <server>${test_acct.server}</server>
			<modify>
			    <header a="X-Zimbra-Received">${XZIMBRARECEIVED(-170400s)}</header>
			</modify>
        </t:lmtpInjectRequest>
    </t:mailinjecttest>

    <t:mailinjecttest >
        <t:lmtpInjectRequest>
            <filename>${msgE.filename}</filename>
            <to>${account24.user}</to>
            <from>${nonZimbraUser.name}</from>
            <server>${test_acct.server}</server>
			<modify>
			    <header a="X-Zimbra-Received">${XZIMBRARECEIVED(-602400s)}</header>
			</modify>
        </t:lmtpInjectRequest>
    </t:mailinjecttest>

    <t:mailinjecttest >
        <t:lmtpInjectRequest>
            <filename>${msgF.filename}</filename>
            <to>${account24.user}</to>
            <from>${nonZimbraUser.name}</from>
            <server>${test_acct.server}</server>
			<modify>
			    <header a="X-Zimbra-Received">${XZIMBRARECEIVED(-1207200s)}</header>
			</modify>
        </t:lmtpInjectRequest>
    </t:mailinjecttest>

    <t:mailinjecttest >
        <t:lmtpInjectRequest>
            <filename>${msgG.filename}</filename>
            <to>${account24.user}</to>
            <from>${nonZimbraUser.name}</from>
            <server>${test_acct.server}</server>
			<modify>
			    <header a="X-Zimbra-Received">${XZIMBRARECEIVED(-2416800s)}</header>
			</modify>
        </t:lmtpInjectRequest>
    </t:mailinjecttest>

</t:test_case>


<t:property name="server.zimbraAccount" value="${test_acct.server}"/>
<t:test_case testcaseid="SearchAuthRequest" type="always" >
    <t:objective> Create setup for the Search </t:objective>
    <t:steps>1. Login to the account.
             2. Search a mail to get the message-id 
    </t:steps>

    <t:test id="login" required="true">
        <t:request>
            <AuthRequest xmlns="urn:zimbraAccount">
                <account by="name">${account24.user}</account>
                <password>${account24.password}</password>
            </AuthRequest>
        </t:request>
        <t:response>
            <t:select path="//acct:AuthResponse/acct:lifetime" match="^\d+$"/>
            <t:select path="//acct:AuthResponse/acct:authToken" set="authToken"/>

        </t:response>
    </t:test>

    <t:test id="searchRequest1">
        <t:request>
            <SearchRequest xmlns="urn:zimbraMail" types="message">
                <tz id="${defaultlocale.timezone}"/>
                <query> subject:(${mail1.subject}) </query>
            </SearchRequest>
        </t:request>
        <t:response>
            <t:select path="//mail:SearchResponse/mail:m">
            <t:select attr="su" match="^${mail1.subject}$"/>
            <t:select attr="id" set="message.id1"/>
            </t:select>
        </t:response>
    </t:test>

    <t:test id="searchRequest2">
        <t:request>
            <SearchRequest xmlns="urn:zimbraMail" types="message">
                <tz id="${defaultlocale.timezone}"/>
                <query> subject:(${mail2.subject}) </query>
            </SearchRequest>
        </t:request>
        <t:response>
            <t:select path="//mail:SearchResponse/mail:m">
            <t:select attr="su" match="^${mail2.subject}$"/>
            <t:select attr="id" set="message.id2"/>
            </t:select>
        </t:response>
    </t:test>

    <t:test id="searchRequest3">
        <t:request>
            <SearchRequest xmlns="urn:zimbraMail" types="message">
                <tz id="${defaultlocale.timezone}"/>
                <query> subject:(${mail3.subject}) </query>
            </SearchRequest>
        </t:request>
        <t:response>
            <t:select path="//mail:SearchResponse/mail:m">
            <t:select attr="su" match="^${mail3.subject}$"/>
            <t:select attr="id" set="message.id3"/>
            </t:select>
        </t:response>
    </t:test>

    <t:test id="searchRequest4">
        <t:request>
            <SearchRequest xmlns="urn:zimbraMail" types="message">
                <tz id="${defaultlocale.timezone}"/>
                <query> subject:(${mail4.subject}) </query>
            </SearchRequest>
        </t:request>
        <t:response>
            <t:select path="//mail:SearchResponse/mail:m">
            <t:select attr="su" match="^${mail4.subject}$"/>
            <t:select attr="id" set="message.id4"/>
            </t:select>
        </t:response>
    </t:test>

    <t:test id="searchRequest5">
        <t:request>
            <SearchRequest xmlns="urn:zimbraMail" types="message">
                <tz id="${defaultlocale.timezone}"/>
                <query> subject:(${mail5.subject}) </query>
            </SearchRequest>
        </t:request>
        <t:response>
            <t:select path="//mail:SearchResponse/mail:m">
            <t:select attr="su" match="^${mail5.subject}$"/>
            <t:select attr="id" set="message.id5"/>
            </t:select>
        </t:response>
    </t:test>

    <t:test id="searchRequest6">
        <t:request>
            <SearchRequest xmlns="urn:zimbraMail" types="message">
                <tz id="${defaultlocale.timezone}"/>
                <query> subject:(${mail6.subject}) </query>
            </SearchRequest>
        </t:request>
        <t:response>
            <t:select path="//mail:SearchResponse/mail:m">
            <t:select attr="su" match="^${mail6.subject}$"/>
            <t:select attr="id" set="message.id6"/>
            </t:select>
        </t:response>
    </t:test>
 
    <t:test id="searchRequest7">
        <t:request>
            <SearchRequest xmlns="urn:zimbraMail" types="message">
                <tz id="${defaultlocale.timezone}"/>
                <query> subject:(${mail7.subject}) </query>
            </SearchRequest>
        </t:request>
        <t:response>
            <t:select path="//mail:SearchResponse/mail:m">
            <t:select attr="su" match="^${mail7.subject}$"/>
            <t:select attr="id" set="message.id7"/>
            </t:select>
        </t:response>
    </t:test>
   
</t:test_case>


<t:test_case testcaseid="combo_from_time_SearchRequest1" type="deprecated" bugids="728" >
    <t:objective> Verify the results are correct for query using from: and last hours and last 4 hours </t:objective>
                  
    <!-- From: with last hour -->
    <t:test>
        <t:request>
            <SearchRequest xmlns="urn:zimbraMail" types="message">
                <tz id="${defaultlocale.timezone}"/>
                <query> from:(foo) ${query.lasthour} </query>
            </SearchRequest>
        </t:request>
        <t:response>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id1}']"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id2}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id3}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id4}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id5}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id6}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id7}']" emptyset="1"/>
        </t:response>
    </t:test>
    
    <!-- From: with last 4 hours -->
    <t:test>
        <t:request>
            <SearchRequest xmlns="urn:zimbraMail" types="message">
                <tz id="${defaultlocale.timezone}"/>
                <query> from:(foo) ${query.last4hours}</query>
            </SearchRequest>
        </t:request>
        <t:response>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id1}']"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id2}']"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id3}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id4}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id5}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id6}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id7}']" emptyset="1"/>
        </t:response>
    </t:test>

    <!-- From: with today -->
    <t:test>
        <t:request>
            <SearchRequest xmlns="urn:zimbraMail" types="message">
                <tz id="${defaultlocale.timezone}"/>
                <query> from:(foo) ${query.today}</query>
            </SearchRequest>
        </t:request>
        <t:response>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id1}']"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id2}']"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id3}']"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id4}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id5}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id6}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id7}']" emptyset="1"/>
        </t:response>
    </t:test>

    <!-- From: with yesterday -->
    <t:test>
        <t:request>
            <SearchRequest xmlns="urn:zimbraMail" types="message">
                <tz id="${defaultlocale.timezone}"/>
                <query> from:(foo) ${query.yesterday} </query>
            </SearchRequest>
        </t:request>
        <t:response>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id1}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id2}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id3}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id4}']"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id5}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id6}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id7}']" emptyset="1"/>
        </t:response>
    </t:test>
    
    <!-- From: with this week -->
    <t:test>
        <t:request>
            <SearchRequest xmlns="urn:zimbraMail" types="message">
                <tz id="${defaultlocale.timezone}"/>
                <query> from:(foo) ${query.thisweek}</query>
            </SearchRequest>
        </t:request>
        <t:response>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id1}']"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id2}']"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id3}']"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id4}']"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id5}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id6}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id7}']" emptyset="1"/>
        </t:response>
    </t:test>

    <!-- From: with last week -->
     <t:test>
        <t:request>
            <SearchRequest xmlns="urn:zimbraMail" types="message">
                <tz id="${defaultlocale.timezone}"/>
                <query> from:(foo) ${query.lastweek}</query>
            </SearchRequest>
        </t:request>
        <t:response>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id1}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id2}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id3}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id4}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id5}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id6}']"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id7}']" emptyset="1"/>
        </t:response>
    </t:test>

    <!-- From: with this month  -->
    <t:test>
        <t:request>
            <SearchRequest xmlns="urn:zimbraMail" types="message">
                <tz id="${defaultlocale.timezone}"/>
                <query> from:(foo) ${query.thismonth} </query>
            </SearchRequest>
        </t:request>
        <t:response>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id1}']"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id2}']"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id3}']"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id4}']"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id5}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id6}']"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id7}']"/>
        </t:response>
    </t:test>
    
    <!-- From: with last month  -->
    <t:test>
        <t:request>
            <SearchRequest xmlns="urn:zimbraMail" types="message">
                <tz id="${defaultlocale.timezone}"/>
                <query> from:(foo) ${query.lastmonth}</query>
            </SearchRequest>
        </t:request>
        <t:response>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id1}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id2}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id3}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id4}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id5}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id6}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id7}']" emptyset="1"/>
        </t:response>
    </t:test>

    <!-- From: with this year  -->
     <t:test>
        <t:request>
            <SearchRequest xmlns="urn:zimbraMail" types="message">
                <tz id="${defaultlocale.timezone}"/>
                <query> from:(foo) ${query.thisyear}</query>
            </SearchRequest>
        </t:request>
        <t:response>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id1}']"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id2}']"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id3}']"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id4}']"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id5}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id6}']"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id7}']"/>
        </t:response>
    </t:test>

    <!-- From: with last year  -->
    <t:test>
        <t:request>
            <SearchRequest xmlns="urn:zimbraMail" types="message">
                <tz id="${defaultlocale.timezone}"/>
                <query> from:(foo) ${query.lastyear} </query>
            </SearchRequest>
        </t:request>
        <t:response>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id1}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id2}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id3}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id4}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id5}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id6}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id7}']" emptyset="1"/>
        </t:response>
    </t:test>

</t:test_case>


<t:test_case testcaseid="combo_to_time_SearchRequest1" type="deprecated" bugids="728" >
    <t:objective> Verify the results are correct for query using to: and last hours and last 4 hours </t:objective>
                  
    <!-- TO: with last hour -->
    <t:test>
        <t:request>
            <SearchRequest xmlns="urn:zimbraMail" types="message">
                <tz id="${defaultlocale.timezone}"/>
                <query> to:(foo) ${query.lasthour} </query>
            </SearchRequest>
        </t:request>
        <t:response>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id1}']"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id2}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id3}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id4}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id5}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id6}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id7}']" emptyset="1"/>
        </t:response>
    </t:test>
    
    <!-- TO: with last 4 hours -->
    <t:test>
        <t:request>
            <SearchRequest xmlns="urn:zimbraMail" types="message">
                <tz id="${defaultlocale.timezone}"/>
                <query> to:(foo) ${query.last4hours}</query>
            </SearchRequest>
        </t:request>
        <t:response>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id1}']"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id2}']"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id3}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id4}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id5}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id6}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id7}']" emptyset="1"/>
        </t:response>
    </t:test>

    <!-- TO: with today -->
    <t:test>
        <t:request>
            <SearchRequest xmlns="urn:zimbraMail" types="message">
                <tz id="${defaultlocale.timezone}"/>
                <query> to:(foo) ${query.today}</query>
            </SearchRequest>
        </t:request>
        <t:response>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id1}']"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id2}']"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id3}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id4}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id5}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id6}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id7}']" emptyset="1"/>
        </t:response>
    </t:test>

    <!-- TO: with yesterday -->
    <t:test>
        <t:request>
            <SearchRequest xmlns="urn:zimbraMail" types="message">
                <tz id="${defaultlocale.timezone}"/>
                <query> to:(foo) ${query.yesterday} </query>
            </SearchRequest>
        </t:request>
        <t:response>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id1}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id2}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id3}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id4}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id5}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id6}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id7}']" emptyset="1"/>
        </t:response>
    </t:test>
    
    <!-- TO: with this week -->
    <t:test>
        <t:request>
            <SearchRequest xmlns="urn:zimbraMail" types="message">
                <tz id="${defaultlocale.timezone}"/>
                <query> to:(foo) ${query.thisweek}</query>
            </SearchRequest>
        </t:request>
        <t:response>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id1}']"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id2}']"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id3}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id4}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id5}']"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id6}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id7}']" emptyset="1"/>
        </t:response>
    </t:test>

    <!-- TO: with last week -->
     <t:test>
        <t:request>
            <SearchRequest xmlns="urn:zimbraMail" types="message">
                <tz id="${defaultlocale.timezone}"/>
                <query> to:(foo) ${query.lastweek}</query>
            </SearchRequest>
        </t:request>
        <t:response>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id1}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id2}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id3}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id4}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id5}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id6}']"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id7}']" emptyset="1"/>
        </t:response>
    </t:test>

    <!-- TO: with this month  -->
    <t:test>
        <t:request>
            <SearchRequest xmlns="urn:zimbraMail" types="message">
                <tz id="${defaultlocale.timezone}"/>
                <query> to:(foo) ${query.thismonth} </query>
            </SearchRequest>
        </t:request>
        <t:response>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id1}']"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id2}']"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id3}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id4}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id5}']"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id6}']" />
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id7}']"/>
        </t:response>
    </t:test>
    
    <!-- TO: with last month  -->
    <t:test>
        <t:request>
            <SearchRequest xmlns="urn:zimbraMail" types="message">
                <tz id="${defaultlocale.timezone}"/>
                <query> to:(foo) ${query.lastmonth}</query>
            </SearchRequest>
        </t:request>
        <t:response>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id1}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id2}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id3}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id4}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id5}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id6}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id7}']" emptyset="1"/>
        </t:response>
    </t:test>

    <!-- TO: with this year  -->
     <t:test>
        <t:request>
            <SearchRequest xmlns="urn:zimbraMail" types="message">
                <tz id="${defaultlocale.timezone}"/>
                <query> to:(foo) ${query.thisyear}</query>
            </SearchRequest>
        </t:request>
        <t:response>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id1}']"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id2}']"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id3}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id4}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id5}']"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id6}']"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id7}']"/>
        </t:response>
    </t:test>

    <!-- TO: with last year  -->
    <t:test>
        <t:request>
            <SearchRequest xmlns="urn:zimbraMail" types="message">
                <tz id="${defaultlocale.timezone}"/>
                <query> to:(foo) ${query.lastyear} </query>
            </SearchRequest>
        </t:request>
        <t:response>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id1}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id2}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id3}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id4}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id5}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id6}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id7}']" emptyset="1"/>
        </t:response>
    </t:test>

</t:test_case>

<t:test_case testcaseid="combo_cc_time_SearchRequest1" type="deprecated" >
    <t:objective> Verify the results are correct for query using to: and last hours and last 4 hours </t:objective>
                  
    <!-- Cc: with last hour -->
    <t:test>
        <t:request>
            <SearchRequest xmlns="urn:zimbraMail" types="message">
                <tz id="${defaultlocale.timezone}"/>
                <query> cc:(foo) ${query.lasthour} </query>
            </SearchRequest>
        </t:request>
        <t:response>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id1}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id2}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id3}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id4}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id5}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id6}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id7}']" emptyset="1"/>
        </t:response>
    </t:test>
    
    <!-- Cc: with last 4 hours -->
    <t:test>
        <t:request>
            <SearchRequest xmlns="urn:zimbraMail" types="message">
                <tz id="${defaultlocale.timezone}"/>
                <query> cc:(foo) ${query.last4hours}</query>
            </SearchRequest>
        </t:request>
        <t:response>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id1}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id2}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id3}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id4}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id5}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id6}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id7}']" emptyset="1"/>
        </t:response>
    </t:test>

    <!-- Cc: with today -->
    <t:test>
        <t:request>
            <SearchRequest xmlns="urn:zimbraMail" types="message">
                <tz id="${defaultlocale.timezone}"/>
                <query> cc:(foo) ${query.today}</query>
            </SearchRequest>
        </t:request>
        <t:response>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id1}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id2}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id3}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id4}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id5}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id6}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id7}']" emptyset="1"/>
        </t:response>
    </t:test>

    <!-- Cc: with yesterday -->
    <t:test>
        <t:request>
            <SearchRequest xmlns="urn:zimbraMail" types="message">
                <tz id="${defaultlocale.timezone}"/>
                <query> cc:(foo) ${query.yesterday} </query>
            </SearchRequest>
        </t:request>
        <t:response>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id1}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id2}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id3}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id4}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id5}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id6}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id7}']" emptyset="1"/>
        </t:response>
    </t:test>
    
    <!-- Cc: with this week -->
    <t:test>
        <t:request>
            <SearchRequest xmlns="urn:zimbraMail" types="message">
                <tz id="${defaultlocale.timezone}"/>
                <query> cc:(foo) ${query.thisweek}</query>
            </SearchRequest>
        </t:request>
        <t:response>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id1}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id2}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id3}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id4}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id5}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id6}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id7}']" emptyset="1"/>
        </t:response>
    </t:test>

    <!-- Cc: with last week -->
     <t:test>
        <t:request>
            <SearchRequest xmlns="urn:zimbraMail" types="message">
                <tz id="${defaultlocale.timezone}"/>
                <query> cc:(foo) ${query.lastweek}</query>
            </SearchRequest>
        </t:request>
        <t:response>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id1}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id2}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id3}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id4}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id5}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id6}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id7}']" emptyset="1"/>
        </t:response>
    </t:test>

    <!-- Cc: with this month  -->
    <t:test>
        <t:request>
            <SearchRequest xmlns="urn:zimbraMail" types="message">
                <tz id="${defaultlocale.timezone}"/>
                <query> cc:(foo) ${query.thismonth} </query>
            </SearchRequest>
        </t:request>
        <t:response>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id1}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id2}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id3}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id4}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id5}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id6}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id7}']" emptyset="1"/>
        </t:response>
    </t:test>
    
    <!-- Cc: with last month  -->
    <t:test>
        <t:request>
            <SearchRequest xmlns="urn:zimbraMail" types="message">
                <tz id="${defaultlocale.timezone}"/>
                <query> cc:(foo) ${query.lastmonth}</query>
            </SearchRequest>
        </t:request>
        <t:response>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id1}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id2}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id3}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id4}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id5}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id6}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id7}']" emptyset="1"/>
        </t:response>
    </t:test>

    <!-- Cc: with this year  -->
     <t:test>
        <t:request>
            <SearchRequest xmlns="urn:zimbraMail" types="message">
                <tz id="${defaultlocale.timezone}"/>
                <query> cc:(foo) ${query.thisyear}</query>
            </SearchRequest>
        </t:request>
        <t:response>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id1}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id2}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id3}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id4}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id5}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id6}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id7}']" emptyset="1"/>
        </t:response>
    </t:test>

    <!-- Cc: with last year  -->
    <t:test>
        <t:request>
            <SearchRequest xmlns="urn:zimbraMail" types="message">
                <tz id="${defaultlocale.timezone}"/>
                <query> cc:(foo) ${query.lastyear} </query>
            </SearchRequest>
        </t:request>
        <t:response>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id1}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id2}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id3}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id4}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id5}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id6}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id7}']" emptyset="1"/>
        </t:response>
    </t:test>

</t:test_case>


<t:test_case testcaseid="combo_subject_time_SearchRequest1" type="deprecated" bugids="728" >
    <t:objective> Verify the results are correct for query using subject: and last hours and last 4 hours </t:objective>
                  
    <!-- subject: with last hour -->
    <t:test>
        <t:request>
            <SearchRequest xmlns="urn:zimbraMail" types="message">
                <tz id="${defaultlocale.timezone}"/>
                <query> subject:(${mail1.subject}) ${query.lasthour} </query>
            </SearchRequest>
        </t:request>
        <t:response>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id1}']"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id2}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id3}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id4}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id5}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id6}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id7}']" emptyset="1"/>
        </t:response>
    </t:test>
    
    <!-- subject: with last 4 hours -->
    <t:test>
        <t:request>
            <SearchRequest xmlns="urn:zimbraMail" types="message">
                <tz id="${defaultlocale.timezone}"/>
                <query> subject:(${mail2.subject}) ${query.last4hours}</query>
            </SearchRequest>
        </t:request>
        <t:response>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id1}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id2}']"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id3}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id4}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id5}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id6}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id7}']" emptyset="1"/>
        </t:response>
    </t:test>

    <!-- subject: with subjectday -->
    <t:test>
        <t:request>
            <SearchRequest xmlns="urn:zimbraMail" types="message">
                <tz id="${defaultlocale.timezone}"/>
                <query> subject:(${mail3.subject}) ${query.today}</query>
            </SearchRequest>
        </t:request>
        <t:response>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id1}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id2}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id3}']"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id4}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id5}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id6}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id7}']" emptyset="1"/>
        </t:response>
    </t:test>

    <!-- subject: with yesterday -->
    <t:test>
        <t:request>
            <SearchRequest xmlns="urn:zimbraMail" types="message">
                <tz id="${defaultlocale.timezone}"/>
                <query> subject:(${mail4.subject}) ${query.yesterday} </query>
            </SearchRequest>
        </t:request>
        <t:response>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id1}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id2}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id3}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id4}']"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id5}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id6}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id7}']" emptyset="1"/>
        </t:response>
    </t:test>
    
    <!-- subject: with this week -->
    <t:test>
        <t:request>
            <SearchRequest xmlns="urn:zimbraMail" types="message">
                <tz id="${defaultlocale.timezone}"/>
                <query> subject:(${mail4.subject}) ${query.thisweek}</query>
            </SearchRequest>
        </t:request>
        <t:response>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id1}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id2}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id3}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id4}']"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id5}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id6}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id7}']" emptyset="1"/>
        </t:response>
    </t:test>

    <!-- subject: with last week -->
     <t:test>
        <t:request>
            <SearchRequest xmlns="urn:zimbraMail" types="message">
                <tz id="${defaultlocale.timezone}"/>
                <query> subject:(${mail6.subject}) ${query.lastweek}</query>
            </SearchRequest>
        </t:request>
        <t:response>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id1}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id2}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id3}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id4}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id5}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id6}']" />
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id7}']" emptyset="1"/>
        </t:response>
    </t:test>

    <!-- subject: with this month  -->
    <t:test>
        <t:request>
            <SearchRequest xmlns="urn:zimbraMail" types="message">
                <tz id="${defaultlocale.timezone}"/>
                <query> subject:(${mail6.subject}) ${query.thismonth} </query>
            </SearchRequest>
        </t:request>
        <t:response>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id1}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id2}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id3}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id4}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id5}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id6}']"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id7}']" emptyset="1"/>
        </t:response>
    </t:test>
    
    <!-- subject: with last month  -->
    <t:test>
        <t:request>
            <SearchRequest xmlns="urn:zimbraMail" types="message">
                <tz id="${defaultlocale.timezone}"/>
                <query> subject:(${mail7.subject}) ${query.lastmonth}</query>
            </SearchRequest>
        </t:request>
        <t:response>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id1}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id2}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id3}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id4}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id5}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id6}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id7}']" emptyset="1"/>
        </t:response>
    </t:test>

    <!-- subject: with this year  -->
     <t:test>
        <t:request>
            <SearchRequest xmlns="urn:zimbraMail" types="message">
                <tz id="${defaultlocale.timezone}"/>
                <query> subject:(${mail1.subject}) ${query.thisyear}</query>
            </SearchRequest>
        </t:request>
        <t:response>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id1}']"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id2}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id3}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id4}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id5}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id6}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id7}']" emptyset="1"/>
        </t:response>
    </t:test>

    <!-- subject: with last year  -->
    <t:test>
        <t:request>
            <SearchRequest xmlns="urn:zimbraMail" types="message">
                <tz id="${defaultlocale.timezone}"/>
                <query> subject:(foo) ${query.lastyear} </query>
            </SearchRequest>
        </t:request>
        <t:response>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id1}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id2}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id3}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id4}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id5}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id6}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id7}']" emptyset="1"/>
        </t:response>
    </t:test>

</t:test_case>

<t:property name="content.text" value="good men"/>

<t:test_case testcaseid="combo_content_time_SearchRequest1" type="deprecated" bugids="728" >
    <t:objective> Verify the results are correct for query using content: and last hours and last 4 hours </t:objective>
                  
    <!-- Content: with last hour -->
    <t:test>
        <t:request>
            <SearchRequest xmlns="urn:zimbraMail" types="message">
                <tz id="${defaultlocale.timezone}"/>
                <query> content:(${content.text})  ${query.lasthour} </query>
            </SearchRequest>
        </t:request>
        <t:response>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id1}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id2}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id3}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id4}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id5}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id6}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id7}']" emptyset="1"/>
        </t:response>
    </t:test>
    
    <!-- Content: with last 4 hours -->
    <t:test>
        <t:request>
            <SearchRequest xmlns="urn:zimbraMail" types="message">
                <tz id="${defaultlocale.timezone}"/>
                <query> content:(${content.text}) ${query.last4hours}</query>
            </SearchRequest>
        </t:request>
        <t:response>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id1}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id2}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id3}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id4}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id5}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id6}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id7}']" emptyset="1"/>
        </t:response>
    </t:test>

    <!-- Content: with today -->
    <t:test>
        <t:request>
            <SearchRequest xmlns="urn:zimbraMail" types="message">
                <tz id="${defaultlocale.timezone}"/>
                <query> content:(${content.text}) ${query.today}</query>
            </SearchRequest>
        </t:request>
        <t:response>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id1}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id2}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id3}']"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id4}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id5}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id6}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id7}']" emptyset="1"/>
        </t:response>
    </t:test>

    <!-- Content: with yesterday -->
    <t:test>
        <t:request>
            <SearchRequest xmlns="urn:zimbraMail" types="message">
                <tz id="${defaultlocale.timezone}"/>
                <query> content:(${content.text}) ${query.yesterday} </query>
            </SearchRequest>
        </t:request>
        <t:response>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id1}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id2}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id3}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id4}']"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id5}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id6}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id7}']" emptyset="1"/>
        </t:response>
    </t:test>
    
    <!-- Content: with this week -->
    <t:test>
        <t:request>
            <SearchRequest xmlns="urn:zimbraMail" types="message">
                <tz id="${defaultlocale.timezone}"/>
                <query> content:(${content.text}) ${query.thisweek}</query>
            </SearchRequest>
        </t:request>
        <t:response>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id1}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id2}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id3}']"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id4}']" />
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id5}']"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id6}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id7}']" emptyset="1"/>
        </t:response>
    </t:test>

    <!-- Content: with last week -->
     <t:test>
        <t:request>
            <SearchRequest xmlns="urn:zimbraMail" types="message">
                <tz id="${defaultlocale.timezone}"/>
                <query> content:(${content.text}) ${query.lastweek}</query>
            </SearchRequest>
        </t:request>
        <t:response>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id1}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id2}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id3}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id4}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id5}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id6}']"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id7}']" emptyset="1"/>
        </t:response>
    </t:test>

    <!-- Content: with this month  -->
    <t:test>
        <t:request>
            <SearchRequest xmlns="urn:zimbraMail" types="message">
                <tz id="${defaultlocale.timezone}"/>
                <query> content:(${content.text}) ${query.thismonth} </query>
            </SearchRequest>
        </t:request>
        <t:response>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id1}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id2}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id3}']" />
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id4}']" />
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id5}']" />
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id6}']" />
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id7}']" />
        </t:response>
    </t:test>
    
    <!-- Content: with last month  -->
    <t:test>
        <t:request>
            <SearchRequest xmlns="urn:zimbraMail" types="message">
                <tz id="${defaultlocale.timezone}"/>
                <query> content:(${content.text}) ${query.lastmonth}</query>
            </SearchRequest>
        </t:request>
        <t:response>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id1}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id2}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id3}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id4}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id5}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id6}']" emptyset="1"/>
            <t:select path="//mail:SearchResponse/mail:m[@id='${message.id7}']" emptyset="1"/>
        </t:response>
    </t:test>

    <!-- Content: with this year  -->
     <t:test>
        <t:request>
            <SearchRequest xmlns="urn:zimbraMail" types="message">
                <tz id="${defaultlocale.timezone}"/>
                <query> content:(${content.text}) ${query.thisyear}</query>
            </SearchRequest>
        </t:request>
        <t:response>
        <t:select path="//mail:SearchResponse/mail:m[@id='${message.id1}']" emptyset="1"/>
        <t:select path="//mail:SearchResponse/mail:m[@id='${message.id2}']" emptyset="1"/>
        <t:select path="//mail:SearchResponse/mail:m[@id='${message.id3}']"/>
        <t:select path="//mail:SearchResponse/mail:m[@id='${message.id4}']"/>
        <t:select path="//mail:SearchResponse/mail:m[@id='${message.id5}']"/>
        <t:select path="//mail:SearchResponse/mail:m[@id='${message.id6}']"/>
        <t:select path="//mail:SearchResponse/mail:m[@id='${message.id7}']"/>
  
        </t:response>
    </t:test>

    <!-- Content: with last year  -->
    <t:test>
        <t:request>
            <SearchRequest xmlns="urn:zimbraMail" types="message">
                <tz id="${defaultlocale.timezone}"/>
                <query> content:(${content.text}) ${query.lastyear} </query>
            </SearchRequest>
        </t:request>
        <t:response>
            <t:select path="//mail:SearchResponse/mail:m" emptyset="1"/>
        </t:response>
    </t:test>

</t:test_case>

</t:tests>